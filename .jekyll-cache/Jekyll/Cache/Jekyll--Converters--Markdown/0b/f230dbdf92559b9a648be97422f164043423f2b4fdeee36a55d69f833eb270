I"<h1 id="ä»‹ç»">ä»‹ç»</h1>

<p>æäº¤I/Oè¯·æ±‚çš„é¡ºåºé€šå¸¸æ˜¯è¿™æ ·çš„:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* è·å–ä¸€ä¸ª SQE */</span>
<span class="k">struct</span> <span class="n">io_uring_sqe</span> <span class="o">*</span><span class="n">sqe</span> <span class="o">=</span> <span class="n">io_uring_get_sqe</span><span class="p">(</span><span class="n">ring</span><span class="p">);</span>
<span class="cm">/* è®¾ç½®ä¸€ä¸ª readv æ“ä½œ */</span>
<span class="n">io_uring_prep_readv</span><span class="p">(</span><span class="n">sqe</span><span class="p">,</span> <span class="n">file_fd</span><span class="p">,</span> <span class="n">fi</span><span class="o">-&gt;</span><span class="n">iovecs</span><span class="p">,</span> <span class="n">blocks</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="cm">/* è®¾ç½®ç”¨æˆ·æ•°æ® */</span>
<span class="n">io_uring_sqe_set_data</span><span class="p">(</span><span class="n">sqe</span><span class="p">,</span> <span class="n">fi</span><span class="p">);</span>
<span class="cm">/* æœ€åæäº¤è¯·iå» */</span>
<span class="n">io_uring_submit</span><span class="p">(</span><span class="n">ring</span><span class="p">);</span>
</code></pre></div></div>

<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨çš„æ˜¯ï¼š<a href="https://unixism.net/loti/tutorial/cat_liburing.html#cat-liburing">cat ä½¿ç”¨ liburing å®ç°</a></p>

<p>ä½ è°ƒç”¨ <strong>io_ring_get_sqe()</strong> æ¥è·å–ä¸€ä¸ªæäº¤é˜Ÿåˆ—æ¡ç›®æˆ–SQEï¼Œä½¿ç”¨ä¸€ä¸ªæäº¤è¾…åŠ©å™¨æ¥å¤„ç†ä½ æƒ³è¦å®Œæˆçš„I/Oç±»å‹ï¼Œæ¯”å¦‚ <strong>io_uring_prep_readv()</strong> æˆ– <strong>io_uring_prep_accept()</strong>ã€‚è°ƒç”¨ <strong>io_uring_set_sqe_data()</strong> ä»¥è·å–æŒ‡å‘å”¯ä¸€æ ‡è¯†è¯¥è¯·æ±‚çš„æ•°æ®ç»“æ„çš„æŒ‡é’ˆ(åœ¨å®Œæˆç«¯è·å¾—ç›¸åŒçš„ç”¨æˆ·æ•°æ®)ï¼Œæœ€åè°ƒç”¨io_uring_submit()æäº¤è¯·æ±‚ã€‚</p>

<p>TODOï¼šæ‚¨è¿˜å¯ä»¥è®¾ç½®è½®è¯¢ä»¥é¿å…è°ƒç”¨ <strong><a href="https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_submit">io_uring_submit()</a></strong> ç³»ç»Ÿè°ƒç”¨ã€‚</p>

<hr />

<p>struct io_uring_sqe <strong>*io_uring_get_sqe</strong>(struct ã€io_uring](https://unixism.net/loti/ref-liburing/setup_teardown.html#c.io_uring) *ring)</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæäº¤é˜Ÿåˆ—æ¡ç›®ï¼Œå¯ä»¥ç”¨æ¥æäº¤ä¸€ä¸ªI/Oæ“ä½œã€‚åœ¨è°ƒç”¨[io_uring_submit()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_submit)æäº¤å†…æ ¸å¤„ç†ä½ çš„è¯·æ±‚é˜Ÿåˆ—ä¹‹å‰ï¼Œä½ å¯ä»¥å¤šæ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥æäº¤I/Oè¯·æ±‚é˜Ÿåˆ—ã€‚

**å‚æ•°**
- ring:  [io_uring_queue_init()](https://unixism.net/loti/ref-liburing/setup_teardown.html#c.io_uring_queue_init) è®¾ç½®çš„ [uring](https://unixism.net/loti/ref-liburing/setup_teardown.html#c.io_uring) ç»“æ„

è¿”å›å€¼ï¼š ä¸€ä¸ªæŒ‡å‘ **io_uring_sqe** çš„æŒ‡é’ˆï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºçš„SQEã€‚å¦‚æœæäº¤é˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è¿”å›NULLã€‚

è¯·çœ‹[æäº¤ä»‹ç»ä»£ç ç‰‡æ®µ](https://unixism.net/loti/ref-liburing/submission.html#submission-intro-snippet)çš„ä½¿ç”¨å®ä¾‹ã€‚

# å‚è€ƒ
- [io_uring åº•å±‚æ¥å£ç¼–ç¨‹](https://unixism.net/loti/low_level.html#low-level)
- [cp ä½¿ç”¨ liburing å®ç°](https://unixism.net/loti/tutorial/cp_liburing.html#cp-liburing)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_sqe_set_data</strong>(<em>struct</em> io_uring_sqe *sqe, void *data)
	è¿™æ˜¯ä¸€ä¸ªå†…è”æ–¹ä¾¿å‡½æ•°ï¼Œç”¨äºè®¾ç½®ä¼ å…¥çš„SQEå®ä¾‹çš„ç”¨æˆ·æ•°æ®å­—æ®µã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- SQEï¼šè¦ä¸ºå…¶è®¾ç½®ç”¨æˆ·æ•°æ®çš„SQEå®ä¾‹ã€‚
- dataï¼šä¸€ä¸ªæŒ‡å‘ç”¨æˆ·æ•°æ®çš„æŒ‡é’ˆ
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_sqe_set_flags</strong>(<em>struct</em> io_uring_sqe *sqe, unsigned flags)
	è¿™æ˜¯ä¸€ä¸ªå†…è”æ–¹ä¾¿å‡½æ•°ï¼Œç”¨äºè®¾ç½®ä¼ å…¥çš„SQEå®ä¾‹çš„ flags å­—æ®µã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqe: è¦ä¸ºå…¶è®¾ç½®ç”¨æˆ·æ•°æ®çš„SQEå®ä¾‹ã€‚
- flags:ä½ è¦è®¾ç½®çš„æ ‡å¿—ã€‚è¿™æ˜¯ä¸ª bitmap å­—æ®µï¼Œè¯·å‚è§[io_uring_enter](https://unixism.net/loti/ref-iouring/io_uring_enter.html#io-uring-enter)å‚è€ƒé¡µé¢ï¼Œäº†è§£å„ç§SQEæ ‡å¿—åŠå…¶å«ä¹‰ã€‚
</code></pre></div>  </div>
</blockquote>

<hr />

<p>int <strong>io_uring_submit</strong>(struct io_uring *ring)
	å°†é€šè¿‡io_uring_get_sqe()è·å–çš„SQEæäº¤ç»™å†…æ ¸ã€‚å½“ä½ å¤šæ¬¡è°ƒç”¨io_uring_get_sqe()æ¥è®¾ç½®å¤šä¸ªI/Oè¯·æ±‚åï¼Œä½ å¯ä»¥è°ƒç”¨ä¸€æ¬¡ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**

- ringï¼š[io_uring_queue_init()](https://unixism.net/loti/ref-liburing/setup_teardown.html#c.io_uring_queue_init) è®¾ç½®çš„ [uring](https://unixism.net/loti/ref-liburing/setup_teardown.html#c.io_uring) ç»“æ„

**è¿”å›å€¼**ï¼šè¿”å›æäº¤çš„sqeæ•°é‡ã€‚

# å‚è€ƒ
- [io_uring åº•å±‚æ¥å£ç¼–ç¨‹](https://unixism.net/loti/low_level.html#low-level)
- [cp ä½¿ç”¨ liburing å®ç°](https://unixism.net/loti/tutorial/cp_liburing.html#cp-liburing)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>int <strong>io_uring_submit_and_wait</strong>(struct io_uring *ring, unsigned wait_nr)	
	å’Œ<strong>io_uring_submit()</strong>ä¸€æ ·ï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªé¢å¤–çš„å‚æ•°wait_nrï¼Œè®©ä½ æŒ‡å®šè¦ç­‰å¾…å¤šå°‘ä¸ªå®Œæˆã€‚è¿™ä¸ªè°ƒç”¨å°†é˜»å¡ï¼Œç›´åˆ°å†…æ ¸å¤„ç†wait_nrä¸ªæäº¤è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬çš„è¯¦ç»†ä¿¡æ¯æ”¾å…¥å®Œæˆé˜Ÿåˆ—ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- wait_nrï¼š ç­‰å¾…å®Œæˆçš„æ•°é‡ã€‚
**è¿”å›å€¼**ï¼šè¿”å›æäº¤çš„sqeæ•°é‡ã€‚
</code></pre></div>  </div>
</blockquote>

<h1 id="submission-è¾…åŠ©å™¨">Submission è¾…åŠ©å™¨</h1>

<p>æäº¤è¾…åŠ©å™¨æ˜¯æ–¹ä¾¿çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥è½»æ¾åœ°æŒ‡å®šä½ æƒ³é€šè¿‡SQEè¯·æ±‚çš„I/Oæ“ä½œã€‚æ¯ä¸ªæ”¯æŒçš„I/Oç±»å‹éƒ½æœ‰ä¸€ä¸ªå‡½æ•°ã€‚
å…³äº<strong>io_uring_prep_readv()</strong>å‡½æ•°çš„ä½¿ç”¨å®ä¾‹ï¼Œè¯·å‚è§<a href="https://unixism.net/loti/ref-liburing/submission.html#submission-intro-snippet">æäº¤ä»‹ç»ä»£ç </a>ç‰‡æ®µã€‚</p>

<p>void <strong>io_uring_prep_nop</strong>(struct io_uring_sqe *sqe)
	æ­¤å‡½æ•°ç”¨äºè®¾ç½®SQEé€šè¿‡è¯»å–æ“ä½œæŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**

- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- bufï¼šç”¨äºå°†è¯»å–æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­çš„ç¼“å†²åŒº
- nbytesï¼šè¦è¯»å–çš„å­—èŠ‚æ•°
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡

# å‚è€ƒ
- [read(2)](http://man7.org/linux/man-pages/man2/read.2.html)
- [lseek(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_write</strong>(struct io_uring_sqe *sqe, int fd, const void *buf, unsigned nbytes, off_t offset)
	è¿™ä¸ªå‡½æ•°é€šè¿‡å†™æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- bufï¼šç”¨äºå°†è¯»å–æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­çš„ç¼“å†²åŒº
- nbytesï¼šè¦è¯»å–çš„å­—èŠ‚æ•°
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡	

# å‚è€ƒ
- [write(2)](http://man7.org/linux/man-pages/man2/write.2.html)
- [lseek(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_readv</strong>(struct io_uring_sqe *sqe, int fd, const struct iovec *iovecs, unsigned nr_vecs, off_t offset)
	è¿™ä¸ªå‡½æ•°ç”¨ â€œscatterâ€ è¯»æ“ä½œè®¾ç½®sqeæŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ï¼Œå¾ˆåƒ<a href="http://man7.org/linux/man-pages/man2/readv.2.html">readv(2)</a>æˆ–<a href="http://man7.org/linux/man-pages/man2/preadv.2.html">preadv(2)</a>ï¼Œå®ƒä»¬æ˜¯Linuxçš„ scatter/gather I/O ç³»åˆ—ç³»ç»Ÿè°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- iovecsï¼šæŒ‡å‘iovecç»“æ„æ•°ç»„çš„æŒ‡é’ˆ
- nr_vecsï¼šç”±iovecså‚æ•°æŒ‡å‘çš„æ•°ç»„ä¸­iovecå®ä¾‹çš„æ•°ç›®
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡	

# å‚è€ƒ
- [readv(2)](http://man7.org/linux/man-pages/man2/readv.2.html)
- [ä½¿ç”¨liburingå®ç°catç¨‹åº](https://unixism.net/loti/tutorial/cat_liburing.html#cat-liburing)ç¤ºä¾‹ä½¿ç”¨äº†è¿™ä¸ªå‡½æ•°
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_read_fixed</strong>(struct io_uring_sqe *sqe, int fd, void *buf, unsigned nbytes, off_t offset, int buf_index)
	ä¸io_uring_prep_read()éå¸¸ç±»ä¼¼ï¼Œè¯¥å‡½æ•°é€šè¿‡è¯»å–æ“ä½œè®¾ç½®SQEæŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œè¿™ä¸ªå‡½æ•°è¢«è®¾è®¡ç”¨æ¥å¤„ç†é€šè¿‡io_uring_register()æ³¨å†Œçš„ä¸€ç»„å›ºå®šçš„é¢„åˆ†é…ç¼“å†²åŒºã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- bufï¼šç”¨äºå°†è¯»å–æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­çš„ç¼“å†²åŒº
- nbytesï¼šè¦è¯»å–çš„å­—èŠ‚æ•°
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡	
- buf_indexï¼šè¦ä½¿ç”¨çš„é¢„åˆ†é…ç¼“å†²åŒºé›†çš„ç´¢å¼•ã€‚

# å‚è€ƒ
- [io_uring_register()](https://unixism.net/loti/ref-iouring/io_uring_register.html#c.io_uring_register)
- [read(2)](http://man7.org/linux/man-pages/man2/read.2.html)
- [lseek(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_writev</strong>(struct io_uring_sqe *sqe, int fd, const struct iovec *iovecs, unsigned nr_vecs, off_t offset)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨â€œgatherâ€å†™æ“ä½œæ¥è®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ï¼Œç±»ä¼¼äº<a href="http://man7.org/linux/man-pages/man2/writev.2.html">writev(2)</a>æˆ–<a href="http://man7.org/linux/man-pages/man2/pwritev.2.html">pwritev(2)</a>ï¼Œå®ƒä»¬æ˜¯Linuxçš„ scatter/gather I/O ç³»åˆ—ç³»ç»Ÿè°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦å†™å…¥çš„æ–‡ä»¶æè¿°ç¬¦
- iovecsï¼šæŒ‡å‘iovecç»“æ„æ•°ç»„çš„æŒ‡é’ˆ
- nr_vecsï¼šç”±iovecså‚æ•°æŒ‡å‘çš„æ•°ç»„ä¸­iovecå®ä¾‹çš„æ•°ç›®
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡		

# å‚è€ƒ
- [writev(2)](http://man7.org/linux/man-pages/man2/writev.2.html)
- [ä½¿ç”¨liburingå®ç°catç¨‹åº](https://unixism.net/loti/tutorial/cat_liburing.html#cat-liburing)ç¤ºä¾‹ä½¿ç”¨äº†è¿™ä¸ªå‡½æ•°
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_write_fixed</strong>(struct io_uring_sqe *sqe, int fd, const void *buf, unsigned nbytes, off_t offset, int buf_index)	
	TODOï¼šè¡¥ä¸ç¼“å†²åŒºæ¡ˆä¾‹æ·»åŠ </p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ä¸[io_uring_prep_read()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_prep_read)éå¸¸ç±»ä¼¼ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡ä¸€ä¸ªreadæ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œè¿™ä¸ªå‡½æ•°è¢«è®¾è®¡ç”¨æ¥å¤„ç†é€šè¿‡[io_uring_register()](https://unixism.net/loti/ref-iouring/io_uring_register.html#c.io_uring_register)æ³¨å†Œçš„ä¸€ç»„å›ºå®šçš„é¢„åˆ†é…ç¼“å†²åŒºã€‚

**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦å†™å…¥çš„æ–‡ä»¶æè¿°ç¬¦
- bufï¼šç”¨äºå°†è¯»å–æ•°æ®å¤åˆ¶åˆ°å…¶ä¸­çš„ç¼“å†²åŒº
- nbytesï¼šè¦è¯»å–çš„å­—èŠ‚æ•°
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡	
- buf_indexï¼šè¦ä½¿ç”¨çš„é¢„åˆ†é…ç¼“å†²åŒºé›†çš„ç´¢å¼•ã€‚

# å‚è€ƒ
- [io_uring_register()](https://unixism.net/loti/ref-iouring/io_uring_register.html#c.io_uring_register)
- [read(2)](http://man7.org/linux/man-pages/man2/read.2.html)
- [lseek(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_fsync</strong>(struct io_uring_sqe *sqe, int fd, unsigned fsync_flags)
	æ­¤å‡½æ•°ä½¿ç”¨ç±»ä¼¼fsync(2)çš„æ“ä½œè®¾ç½®<code class="language-plaintext highlighter-rouge">SQE</code>æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚è¿™ä¼šå¯¼è‡´ç£ç›˜ç¼“å­˜ä¸­æ–‡ä»¶æ•°æ®å’Œä»»ä½•ç¼“å†²åŒºâ€œè„â€æ•°æ®éƒ½åŒæ­¥åˆ°ç£ç›˜ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># æ³¨æ„
	è¯·åŠ¡å¿…æ³¨æ„ï¼Œå°†æ­¤æ“ä½œæ’é˜Ÿå¹¶ä¸èƒ½ä¿è¯åœ¨æ­¤æ“ä½œä¹‹å‰æ’é˜Ÿçš„ä»»ä½•å†™å…¥æ“ä½œéƒ½ä¼šå°†å®ƒä»¬å†™å…¥æ–‡ä»¶çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ã€‚è¿™æ˜¯å› ä¸ºæäº¤é˜Ÿåˆ—ä¸­çš„æ“ä½œå¯ä»¥ç”±å†…æ ¸å¹¶è¡Œè·å–å’Œæ‰§è¡Œã€‚æ­¤åŒæ­¥æ“ä½œå¯ä»¥åœ¨å…¶å‰é¢æ’é˜Ÿçš„å…¶ä»–å†™å…¥æ“ä½œä¹‹å‰å®Œæˆã€‚å®ƒçœŸæ­£èµ·åˆ°çš„ä½œç”¨æ˜¯ï¼Œåœ¨æ‰§è¡Œæ­¤æ“ä½œæ—¶ï¼Œæ–‡ä»¶çš„ä»»ä½•ç°æœ‰â€œè„â€ç¼“å†²åŒºæ•°æ®éƒ½ä¼šåŒæ­¥åˆ°ç£ç›˜ã€‚

**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- fsync_flags: è¿™ä¸ªå€¼å¯ä»¥æ˜¯0ï¼Œä¹Ÿå¯ä»¥æ˜¯ `IORING_FSYNC_DATASYNC`ï¼Œè¿™ä½¿å¾—å®ƒåƒ[fdatasync(2)](http://man7.org/linux/man-pages/man2/fdatasync.2.html)ä¸€æ ·ã€‚

# å‚è€ƒ
- [io_uring_register()](https://unixism.net/loti/ref-iouring/io_uring_register.html#c.io_uring_register)
- [read(2)](http://man7.org/linux/man-pages/man2/read.2.html)
- [lseek(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)
</code></pre></div>  </div>
</blockquote>

<p>void <strong>io_uring_prep_close</strong>(struct io_uring_sqe *sqe, int fd)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼close(2)çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚è¿™å°†å¯¼è‡´fdæ‰€æŒ‡å‘çš„æ–‡ä»¶æè¿°ç¬¦è¢«å…³é—­ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å‚æ•°ï¼š
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
# å‚è€ƒ
- [close(2)](http://man7.org/linux/man-pages/man2/close.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_openat</strong>(struct io_uring_sqe *sqe, int dfd, const char *path, int flags, mode_t mode)
	æ­¤å‡½æ•°ä½¿ç”¨ç±»ä¼¼openat(2)çš„æ“ä½œè®¾ç½®SQEæŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚è¿™ä¼šå¯¼è‡´PATHæŒ‡å‘çš„æ–‡ä»¶åœ¨ç›¸å¯¹äºç”±DFDç›®å½•æ–‡ä»¶æè¿°ç¬¦è¡¨ç¤ºçš„ç›®å½•çš„è·¯å¾„ä¸­æ‰“å¼€ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- dfd: ç›®å½•æ–‡ä»¶æè¿°ç¬¦ï¼Œä»£è¡¨è¦æ‰“å¼€æ–‡ä»¶çš„ç›¸å¯¹ç›®å½•ã€‚
- path: è¦æ‰“å¼€çš„æ–‡ä»¶çš„è·¯å¾„å
- flags: æ ‡å¿—ã€‚è¿™äº›æ˜¯è®¿é—®æ¨¡å¼çš„æ ‡å¿—ã€‚ä¸[open(2)](http://man7.org/linux/man-pages/man2/open.2.html)ç›¸åŒ
- mode: æ¨¡å¼ã€‚åˆ›å»ºæ–°æ–‡ä»¶æ—¶åº”ç”¨çš„æ–‡ä»¶æƒé™ä½ã€‚ä¸ [open(2)](http://man7.org/linux/man-pages/man2/open.2.html) ä¸­çš„ç›¸åŒ

# å‚è€ƒ
- [openat(2)](http://man7.org/linux/man-pages/man2/openat.2.html)
- [open(2)](http://man7.org/linux/man-pages/man2/open.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_openat2</strong>(struct io_uring_sqe *sqe, int dfd, const char *path, struct open_how *how)
	è¿™ä¸ªå‡½æ•°ç”¨ç±»ä¼¼<a href="http://man7.org/linux/man-pages/man2/openat2.2.html">openat2(2)</a>çš„æ“ä½œæ¥è®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚è¿™å°†å¯¼è‡´pathæŒ‡å‘çš„æ–‡ä»¶åœ¨ç›¸å¯¹äºdfdç›®å½•æ–‡ä»¶æè¿°ç¬¦æ‰€ä»£è¡¨çš„ç›®å½•çš„è·¯å¾„ä¸­è¢«æ‰“å¼€ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- dfd: ç›®å½•æ–‡ä»¶æè¿°ç¬¦ï¼Œä»£è¡¨è¦æ‰“å¼€æ–‡ä»¶çš„ç›¸å¯¹ç›®å½•ã€‚
- path: è¦æ‰“å¼€çš„æ–‡ä»¶çš„è·¯å¾„å
- flags: æ ‡å¿—ã€‚è¿™äº›æ˜¯è®¿é—®æ¨¡å¼çš„æ ‡å¿—ã€‚ä¸[open(2)](http://man7.org/linux/man-pages/man2/open.2.html)ç›¸åŒ
- how: ä¸€ä¸ªæŒ‡å‘`open_how`ç»“æ„çš„æŒ‡é’ˆï¼Œè¯¥ç»“æ„å¯ä»¥è®©ä½ æ§åˆ¶æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼ã€‚å‚è§[openat2(2)](http://man7.org/linux/man-pages/man2/openat2.2.html)äº†è§£æ›´å¤šç»†èŠ‚ã€‚

# å‚è€ƒ
- [openat2(2)](http://man7.org/linux/man-pages/man2/openat2.2.html)
- [open(2)](http://man7.org/linux/man-pages/man2/open.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_fallocate</strong>(struct io_uring_sqe *sqe, int fd, int mode, off_t offset, off_t len)		
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼<a href="http://man7.org/linux/man-pages/man2/fallocate.2.html">fallocate(2)</a>çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/fallocate.2.html">fallocate(2)</a>ç³»ç»Ÿè°ƒç”¨ç”¨äºä¸ºæ–‡ä»¶æè¿°ç¬¦fdè¡¨ç¤ºçš„æ–‡ä»¶åˆ†é…ã€é‡Šæ”¾ã€æŠ˜å ã€ç½®é›¶æˆ–å¢åŠ æ–‡ä»¶ç©ºé—´ã€‚è¯·å‚é˜…<a href="http://man7.org/linux/man-pages/man2/fallocate.2.html">fallocate(2)</a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦è¯»å–çš„æ–‡ä»¶æè¿°ç¬¦
- mode:æè¿°äº†å¯¹æ–‡ä»¶è¿›è¡Œçš„æ“ä½œã€‚è¯¦æƒ…è¯·å‚è§fallocate(2)ã€‚
- offsetï¼šè¦è¯»å–çš„æ–‡ä»¶çš„ç»å¯¹åç§»é‡	
- lenï¼šæ“ä½œé•¿åº¦

# å‚è€ƒ
- [fallocate(2)](http://man7.org/linux/man-pages/man2/fallocate.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_statx</strong>(struct io_uring_sqe *sqe, int dfd, const char *path, int flags, unsigned mask, struct statx *statxbuf)
	è¿™ä¸ªå‡½æ•°ç”¨ç±»ä¼¼ statx(2) çš„æ“ä½œè®¾ç½®äº† sqe æ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚statx(2) ç³»ç»Ÿè°ƒç”¨ä¼šè·å– path æŒ‡å‘çš„æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼Œè¿™äº›å…ƒä¿¡æ¯ä¼šè¢«å¡«å…¥ statxbuf æŒ‡å‘çš„ statx ç»“æ„ä¸­ã€‚è¯¦è§ statx(2) ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- dfd: æ ¹æ®thiså’Œpathçš„å€¼ï¼Œpathæ‰€æŒ‡å‘çš„æ–‡ä»¶å¯ä»¥è¢«è§£é‡Šä¸ºç»å¯¹è·¯å¾„æ–‡ä»¶ï¼Œç›¸å¯¹äºprocessæˆ–ç›¸å¯¹äºdfdä¸­çš„ç›®å½•æè¿°ç¬¦å¼•ç”¨çš„ç›®å½•ï¼Œä»¥åŠå…¶ä»–ç±»å‹çš„è§£é‡Šéƒ½æ˜¯å¯èƒ½çš„ã€‚è¯¦è§ [statx(2)ã€‚](http://man7.org/linux/man-pages/man2/statx.2.html)
- path: æ–‡ä»¶è·¯å¾„ã€‚ç»“åˆdfdä¸­çš„å€¼è¿›è¡Œè§£é‡Šã€‚è¯¦è§statxï¼ˆ2ï¼‰
- flagsï¼šè¿™ç”¨æ¥å½±å“è·¯å¾„åçš„æŸ¥è¯¢æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å½±å“å†…æ ¸åœ¨æŸ¥è¯¢è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æ—¶åšä»€ä¹ˆæ ·çš„åŒæ­¥ã€‚è¯¦è§ [statx(2) ã€‚](http://man7.org/linux/man-pages/man2/statx.2.html)

# å‚è€ƒ
- [statx(2)](http://man7.org/linux/man-pages/man2/statx.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_fadvise</strong>(struct io_uring_sqe *sqe, int fd, off_t offset, off_t len, int advice)
	æ­¤å‡½æ•°ä½¿ç”¨ç±»ä¼¼<a href="http://man7.org/linux/man-pages/man2/posix_fadvise.2.html">posix_fadvise(2)</a>çš„æ“ä½œç”¨äºè®¾ç½®SQEæŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/posix_fadvise.2.html">posix_fadvise(2)</a>ç³»ç»Ÿè°ƒç”¨å…è®¸åº”ç”¨ç¨‹åºé€šçŸ¥æ“ä½œç³»ç»Ÿå®ƒè®¡åˆ’å¦‚ä½•è®¿é—®ç”±æ–‡ä»¶æè¿°ç¬¦FDè¡¨ç¤ºçš„æ–‡ä»¶ä¸­çš„æ•°æ®-é¡ºåºã€éšæœºæˆ–å…¶ä»–æ–¹å¼ã€‚è¿™æ˜¯ä¸ºäº†æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="http://man7.org/linux/man-pages/man2/posix_fadvise.2.html">posix_fadvise(2)</a>ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fdï¼šè¦æä¾› advise æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦
- offsetï¼šåº”ç”¨ advise æ–‡ä»¶çš„åç§»é‡
- lenï¼šadvise æ–‡ä»¶çš„é•¿åº¦

# å‚è€ƒ
- [posix_fadvise(2)](http://man7.org/linux/man-pages/man2/posix_fadvise.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_madvise</strong>(struct io_uring_sqe *sqe, void *addr, off_t length, int advice)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼äº<a href="http://man7.org/linux/man-pages/man2/madvise.2.html">madvise(2)</a>çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/madvise.2.html">madvise(2)</a>ç³»ç»Ÿè°ƒç”¨è®©åº”ç”¨ç¨‹åºå°±addræ‰€æŒ‡å‘çš„å†…å­˜(é•¿åº¦ä¸ºå­—èŠ‚)é€šçŸ¥æ“ä½œç³»ç»Ÿã€‚å»ºè®®åŒ…æ‹¬:åº”ç”¨ç¨‹åºè®¡åˆ’å¦‚ä½•è®¿é—®è¯¥èŒƒå›´å†…çš„å†…å­˜(é¡ºåºã€éšæœºæˆ–å…¶ä»–æ–¹å¼)ï¼Œæˆ–è€…å½“è¿›ç¨‹äº§ç”Ÿå­è¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å¦ä¸åº”è¯¥å…±äº«è¯¥èŒƒå›´å†…çš„å†…å­˜ç­‰ç­‰ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚è¯¦æƒ…è¯·å‚è§mdavise(2)ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- addrï¼šadviceåº”ç”¨çš„å†…å­˜èŒƒå›´çš„èµ·å§‹åœ°å€ã€‚
- lenï¼š advice çš„é•¿åº¦

# å‚è€ƒ
- [madvise(2)](http://man7.org/linux/man-pages/man2/madvise.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_splice</strong>(struct io_uring_sqe *sqe, int fd_in, loff_t off_in, int fd_out, loff_t off_out, unsigned int nbytes, unsigned int splice_flags)
	è¿™ä¸ªå‡½æ•°ç”¨ç±»ä¼¼[splice(2)çš„æ“ä½œæ¥è®¾ç½®<code class="language-plaintext highlighter-rouge">sqe</code>æ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="">splice(2)ç³»ç»Ÿè°ƒç”¨åœ¨ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦(<code class="language-plaintext highlighter-rouge">fd_in</code>å’Œ<code class="language-plaintext highlighter-rouge">fd_out</code>)</a>ä¹‹é—´å¤åˆ¶æ•°æ®ï¼Œè€Œä¸åœ¨å†…æ ¸åœ°å€ç©ºé—´å’Œç”¨æˆ·åœ°å€ç©ºé—´ä¹‹é—´å¤åˆ¶æ•°æ®ã€‚ç„¶è€Œï¼Œå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å¿…é¡»ä»£è¡¨ä¸€ä¸ªç®¡é“ã€‚è¯¦è§ <a href="">splice(2) ã€‚</a></p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- `fd_in`ï¼šè¦è¯»å–æ–‡ä»¶çš„æè¿°ç¬¦
- `off_in`ï¼šå¦‚æœ`fd_in`æ˜¯æŒ‡ä¸€ä¸ªç®¡é“ï¼Œåˆ™å¿…é¡»ä¸ºNULLã€‚å¦‚æœ`fd_in`ä¸æ˜¯ä¸€ä¸ªç®¡é“ï¼Œä¸”ï¼š

	- `off_in`ä¸ºNULLï¼Œåˆ™ä»`fd_in`çš„æ–‡ä»¶åç§»é‡ä¸­è¯»å–æ•°æ®ï¼Œå¹¶ç›¸åº”è°ƒæ•´æ–‡ä»¶åç§»é‡ã€‚
	- `off_in`æ˜¯éNULLï¼Œé‚£ä¹ˆ`off_in`å¿…é¡»æŒ‡å‘ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºæŒ‡å®šäº†ä»`fd_in`è¯»å–å­—èŠ‚çš„èµ·å§‹åç§»é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`fd_in`çš„æ–‡ä»¶åç§»é‡æ˜¯ä¸å˜çš„ã€‚

- `fd_out` å’Œ `off_out`ï¼š ç±»ä¼¼äº`fd_in`å’Œ`off_in`çš„è¯­å¥é€‚ç”¨äºè¿™äº›å‚æ•°ã€‚
- nbytesï¼šè¦ copy çš„å­—èŠ‚æ•°é‡
- flagsï¼š å½±å“å¤åˆ¶çš„ä½æ©ç ã€‚è¯¦è§ [splice(2)ã€‚]()

# å‚è€ƒ
- [splice(2)](http://man7.org/linux/man-pages/man2/splice.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_recvmsg</strong>(struct io_uring_sqe *sqe, int fd, struct msghdr *msg, unsigned flags)
	è¿™ä¸ªå‡½æ•°ç”¨ç±»ä¼¼splice(2)çš„æ“ä½œæ¥è®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚splice(2)ç³»ç»Ÿè°ƒç”¨åœ¨ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦(fd_inå’Œfd_out)ä¹‹é—´å¤åˆ¶æ•°æ®ï¼Œè€Œä¸åœ¨å†…æ ¸åœ°å€ç©ºé—´å’Œç”¨æˆ·åœ°å€ç©ºé—´ä¹‹é—´å¤åˆ¶æ•°æ®ã€‚ç„¶è€Œï¼Œå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å¿…é¡»ä»£è¡¨ä¸€ä¸ªç®¡é“ã€‚è¯¦è§ splice(2) ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fd:è¦è¯»å–çš„socketã€‚
- msg:æŒ‡å‘msghdrç»“æ„ä½“çš„æŒ‡é’ˆã€‚
- flag:å½±å“è¯»å–çš„ä½æ©ç ã€‚è¯¦è§recvmsg(2)ã€‚

# å‚è€ƒ
- recvmsg(2)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_sendmsg</strong>(struct io_uring_sqe *sqe, int fd, const struct msghdr *msg, unsigned flags)
	ä¸io_uring_prep_recvmsg()ç›¸åŒï¼Œä½†ç”¨äºå†™å…¥å¥—æ¥å­—ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># å‚è€ƒ
- [sendmsg(2)](http://man7.org/linux/man-pages/man2/sendmsg.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_recv</strong>(struct io_uring_sqe *sqe, int sockfd, void *buf, size_t len, int flags)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼<a href="http://man7.org/linux/man-pages/man2/recv.2.html">recv(2)</a>çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/recv.2.html">recv(2)</a>ç³»ç»Ÿè°ƒç”¨ç”¨äºä»å¥—æ¥å­—è¯»å–æ•°æ®ã€‚å®ƒä½¿ç”¨<code class="language-plaintext highlighter-rouge">msghdr</code>ç»“æ„æ¥å‡å°‘å‚æ•°çš„æ•°é‡ã€‚æ­¤è°ƒç”¨åŒæ—¶é€‚ç”¨äºé¢å‘è¿æ¥(å¦‚TCP)å’Œæ— è¿æ¥(å¦‚UDP)å¥—æ¥å­—ã€‚å¦‚æœæ²¡æœ‰<code class="language-plaintext highlighter-rouge">flags</code>å‚æ•°ï¼Œå®ƒå®Œå…¨ç­‰åŒäºread(2)ï¼Œé™¤äº†åœ¨å¤„ç†é•¿åº¦ä¸ºé›¶æ•°æ®æŠ¥æ—¶æœ‰ä¸€ä¸ªå°åŒºåˆ«ã€‚è¯·å‚é˜…<a href="http://man7.org/linux/man-pages/man2/recv.2.html">recv(2)</a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fd:è¦è¯»å–çš„socketã€‚
- bufï¼šæŒ‡å‘è¯»å–æ•°æ®çš„ç¼“å†²åŒºçš„æŒ‡é’ˆ
- lenï¼šè¦è¯»å–çš„å­—èŠ‚æ•°
- flagsï¼šå½±å“è¯»å–çš„ä½æ©ç ã€‚è¯·å‚è§ [recv(2)](http://man7.org/linux/man-pages/man2/recv.2.html)

# å‚è€ƒ
- [recv(2)](http://man7.org/linux/man-pages/man2/recv.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void io_uring_prep_send(struct io_uring_sqe *sqe, int sockfd, const void *buf, size_t len, int flags)	
	ä¸<a href="https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_prep_recv">io_uring_prep_recv()</a>ç›¸åŒï¼Œä½†ç”¨äºå†™å…¥å¥—æ¥å­—ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># å‚è€ƒ
- [send(2)](http://man7.org/linux/man-pages/man2/send.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_accept</strong>(struct io_uring_sqe *sqe, int fd, struct sockaddr *addr, socklen_t *addrlen, int flags)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼äº[accept4(2)çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/accept4.2.html">accept4(2)ç³»ç»Ÿè°ƒç”¨ä¸é¢å‘è¿æ¥çš„å¥—æ¥å­—ç±»å‹(SOCK_STREAM, SOCK_SEQPACKE</a>T)ä¸€èµ·ä½¿ç”¨ã€‚å®ƒä¸ºä¾¦å¬å¥—æ¥å­—fdæå–æŒ‚èµ·è¿æ¥é˜Ÿåˆ—ä¸Šçš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚å½“flagså‚æ•°è®¾ç½®ä¸º0æ—¶ï¼Œ[accept4(2)å°±ç›¸å½“äºaccept(2)ã€‚è¯·å‚é˜…<a href="http://man7.org/linux/man-pages/man2/accept4.2.html">accept4(2)äº†è§£æ›´å¤šç»†</a>èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># å‚æ•°
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fd:è¦ç›‘å¬çš„socketã€‚
- addrï¼šæŒ‡å‘sockaddrç»“æ„çš„æŒ‡é’ˆã€‚è¿™å°†ç”±å¯¹ç­‰æ–¹çš„åœ°å€å¡«å……
- addrlenï¼šsocklen_tæŒ‡é’ˆã€‚value-resultå‚æ•°ï¼Œå¿…é¡»ç”¨è°ƒç”¨çš„sockaddrç»“æ„çš„å¤§å°å¡«å……ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå¯¹ç­‰åœ°å€çš„å¤§å°ã€‚
- flagsï¼šå½±å“ç³»ç»Ÿè°ƒç”¨çš„ä½æ©ç ã€‚è¯¦è§ [accept4(2)](http://man7.org/linux/man-pages/man2/accept4.2.html) ã€‚

# å‚è€ƒ
-  [accept4(2)](http://man7.org/linux/man-pages/man2/accept4.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_connect</strong>(struct io_uring_sqe *sqe, int fd, struct sockaddr *addr, socklen_t addrlen)	
	è¿™ä¸ªå‡½æ•°é€šè¿‡ç±»ä¼¼<a href="http://man7.org/linux/man-pages/man2/connect.2.html">connect(2)</a>çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/connect.2.html">connect(2)</a>ç³»ç»Ÿè°ƒç”¨ç”¨äºå°†fdä¸­å¼•ç”¨çš„å¥—æ¥å­—è¿æ¥åˆ°addrä¸­æŒ‡å®šçš„åœ°å€ã€‚è¯·å‚é˜…<a href="http://man7.org/linux/man-pages/man2/connect.2.html">connect(2)</a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fd:è¦ç›‘å¬çš„socketã€‚
- addrï¼šæŒ‡å‘sockaddrç»“æ„çš„æŒ‡é’ˆã€‚è¿™å°†ç”±å¯¹ç­‰æ–¹çš„åœ°å€å¡«å……
- addrlenï¼šsocklen_tæŒ‡é’ˆã€‚value-resultå‚æ•°ï¼Œå¿…é¡»ç”¨è°ƒç”¨çš„sockaddrç»“æ„çš„å¤§å°å¡«å……ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºå¯¹ç­‰åœ°å€çš„å¤§å°ã€‚

# å‚è€ƒ
- [connect(2)](http://man7.org/linux/man-pages/man2/connect.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_epoll_ctl</strong>(struct io_uring_sqe *sqe, int epfd, int fd, int op, struct epoll_event *ev)	
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼äº<a href="http://man7.org/linux/man-pages/man2/epoll_ctl.2.html">epoll_ctl(2)</a>çš„æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ã€‚<a href="http://man7.org/linux/man-pages/man2/epoll_ctl.2.html">epoll_ctl(2)</a>ç³»ç»Ÿè°ƒç”¨ç”¨äºåœ¨epfdå¼•ç”¨çš„<a href="http://man7.org/linux/man-pages/man7/epoll.7.html">epoll(7)</a>å®ä¾‹çš„åˆ—è¡¨ä¸­æ·»åŠ æˆ–åˆ é™¤ä¿®æ”¹æ¡ç›®ã€‚opæŒ‡å®šçš„æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹æ“ä½œåº”ç”¨äºæ–‡ä»¶æè¿°ç¬¦fdã€‚è¯·å‚é˜…<a href="http://man7.org/linux/man-pages/man2/epoll_ctl.2.html">epoll_ctl(2)</a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- epfdï¼šæ–‡ä»¶æè¿°ç¬¦è¡¨å’Œepollå®ä¾‹ã€‚
- fd:è¦æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚
- op: è¦æ‰§è¡Œçš„epollæ“ä½œ(EPOLL_CTL_ADDã€EPOLL_CTL_DELæˆ–EPOLL_CTL_MOD)
- ev: æŒ‡å‘epoll_eventç»“æ„çš„æŒ‡é’ˆ

# å‚è€ƒ
- [epoll_ctl(2)](http://man7.org/linux/man-pages/man2/epoll_ctl.2.html)
- [epoll(7)](http://man7.org/linux/man-pages/man7/epoll.7.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_poll_add</strong>(struct io_uring_sqe *sqe, int fd, short poll_mask)
	è¿™ä¸ªå‡½æ•°ä½¿ç”¨ç±»ä¼¼ <a href="http://man7.org/linux/man-pages/man2/poll.2.html">poll(2)</a> æ“ä½œè®¾ç½®sqeæ‰€æŒ‡å‘çš„æäº¤é˜Ÿåˆ—æ¡ç›®ï¼Œå°†æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°pollçš„åˆ—è¡¨ï¼Œå¹¶ä¾¦å¬poll_maskä¸­æŒ‡å®šçš„äº‹ä»¶ã€‚ä¸ä¸å¸¦EPOLLONESHOTçš„pollæˆ–epollä¸åŒï¼Œæ­¤æ¥å£å§‹ç»ˆä»¥å•æ¬¡æ¨¡å¼å·¥ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è½®è¯¢æ“ä½œå®Œæˆï¼Œå°±å¿…é¡»é‡æ–°æäº¤å®ƒã€‚å‚è§<a href="http://man7.org/linux/man-pages/man2/poll.2.html">poll(2)</a>äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- fd:ç”¨äºè½®è¯¢äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ã€‚
- poll_mask: åŒ…å«è¦ä¾¦å¬çš„äº‹ä»¶çš„ä½æ©ç 

# å‚è€ƒ
- 	[poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html)
</code></pre></div>  </div>
</blockquote>

<hr />

<p>void <strong>io_uring_prep_poll_remove</strong>(struct io_uring_sqe *sqe, void *user_data)
	ä»é€šè¿‡<a href="http://man7.org/linux/man-pages/man2/poll.2.html">poll(2)</a>ç›‘è§†è¯·æ±‚ä¸­åˆ é™¤ã€‚</p>

<blockquote>
  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**å‚æ•°**
- sqeï¼šSQEçš„æŒ‡é’ˆï¼Œé€šå¸¸ç”±[io_uring_get_sqe()](https://unixism.net/loti/ref-liburing/submission.html#c.io_uring_get_sqe)è¿”å›ã€‚
- user_data:ç”¨æˆ·æ•°æ®æŒ‡é’ˆã€‚ä¸æ­¤ç”¨æˆ·æ•°æ®å…³è”çš„è¯·æ±‚å°†ä»è¿›ä¸€æ­¥çš„ç›‘è§†ä¸­åˆ é™¤ã€‚

# å‚è€ƒ
- [poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html)
</code></pre></div>  </div>
</blockquote>

:ET