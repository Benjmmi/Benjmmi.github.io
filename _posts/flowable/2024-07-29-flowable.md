---
layout: post
title: "flowable"
keywords: ""
description: ""
tagline: ""
date: '2024-07-29 13:48:10 +0800'
category: flowable
tags: flowable
---
> {{ page.description }}

# 前言
对于业务型的系统还是考虑其设计和应用,源码深入剖析远远没有必要,只需要点到为止即可。

# 正文
~~对 `flowable` 使用也有一年了，使用的最多的还是`CRON`调度能力，对 Flowable 的完整能力使用不到 20%.剩下的 80% 都没有碰过。~~

`Flowable` 是 Fork 了 Activiti 的分支，基础结构基本一样，在功能特性上做了一些细微的调整。Flowable 支持 [BPMN](https://tkjohn.github.io/flowable-userguide/#bpmn20) SOP规范

在Flowable V6中，作业被分拆成了作业表(ACT_RU_JOB)、定时器表(ACT_RU_TIMER_JOB)、暂停表(ACT_RU_SUSPENDED_JOB)与死信表(ACT_RU_DEADLETTER_JOB)。

- 作业表中的作业可以直接执行（类似异步作业与到期的定时器作业）。因此就不需要使用复杂的查询，唯一的where条件是lock time(锁定时间)不能为NULL。

- 定时器作业现在持久化在专门的定时器作业表中，并由一个线程检查到期需要执行的定时器作业。当定时器作业到期需要执行时，该作业会被移至作业表。

- 当作业执行器线程准备执行作业时，会从作业表获取并执行。

- 当流程定义或流程实例暂停时，其关联的作业将被移至单独的暂停作业表。这简化了作业执行器的查询，并清楚显示了暂停中的作业。

如果一个作业执行失败，它将被放入定时器作业表，并用 当前时间+引擎配置的作业失败等待时间 作为到期日期。在该作业到期将被执行时，会重新移至作业表，并被执行。如果重试次数减至0，则该作业将被移至死信表，不再自动执行。这样简化了默认的作业执行器查询，也清楚显示了卡住需要人工干预的作业。


```java
    // SERVICES /////////////////////////////////////////////////////////////////
    protected RepositoryService repositoryService = new RepositoryServiceImpl();
    protected RuntimeService runtimeService = new RuntimeServiceImpl(this);
    protected HistoryService historyService = new HistoryServiceImpl(this);
    protected IdentityService identityService = new IdentityServiceImpl(this);
    protected TaskService taskService = new TaskServiceImpl(this);
    protected FormService formService = new FormServiceImpl();
    protected ManagementService managementService = new ManagementServiceImpl(this);
    protected DynamicBpmnService dynamicBpmnService = new DynamicBpmnServiceImpl(this);
    protected ProcessMigrationService processInstanceMigrationService = new ProcessMigrationServiceImpl(this);
```
    1. `RepositoryService`
        作用：管理流程定义的部署和操作。
            主要功能：
            部署流程定义文件（BPMN、CMMN、DMN等）。
            查询流程定义和流程部署的信息。
            删除流程定义和部署。
    2. `RuntimeService`
        作用：管理流程实例的执行和操作。
            主要功能：
            启动、挂起和恢复流程实例。
            查询运行中的流程实例。
            设置和获取流程变量。
            信号事件的发布和接收。
    3. `HistoryService`
        作用：查询和操作流程实例的历史数据。
            主要功能：
            查询已完成的流程实例。
            获取流程实例的历史活动和任务信息。
            删除历史数据。
    4. `IdentityService`
        作用：管理用户、组和其关系，用于流程的身份验证和授权。
            主要功能：
            创建、更新和删除用户和组。
            管理用户和组的关系。
            验证用户身份。
    5. `TaskService`
        作用：管理和操作任务（用户任务）。
            主要功能：
            查询任务列表。
            完成任务。
            分配任务。
            设置和获取任务变量。
    6. `FormService`
        作用：管理和操作流程中的表单数据。
            主要功能：
            获取任务或启动表单数据。
            提交表单。
    7. `ManagementService`
        作用：提供对Flowable引擎的管理和维护功能。
            主要功能：
            查询和管理工作队列（Jobs）。
            获取引擎配置信息。
            执行数据库表的维护操作。
    8. `DynamicBpmnService`
        作用：在流程运行时动态修改BPMN模型。
            主要功能：
            修改运行时流程模型的属性和行为。
    9. `ProcessMigrationService`
        作用：管理和执行流程实例的迁移。
            主要功能：
            将流程实例从一个版本迁移到另一个版本。

```java
    // IDM ENGINE /////////////////////////////////////////////////////
    protected boolean disableIdmEngine;
    
    // EVENT REGISTRY /////////////////////////////////////////////////////
    protected boolean disableEventRegistry;
```
    1. `disableIdmEngine`
        **作用**：控制是否禁用身份管理引擎（IDM Engine）。
        - 身份管理引擎（IDM Engine）：
            **功能**：IDM Engine负责管理用户、组及其关系，提供身份验证和授权服务。它支持用户的创建、更新、删除，组的创建、更新、删除以及用户和组的关联等操作。
            **配置**：如果设置为true，则禁用IDM引擎，这意味着将不会加载和初始化与身份管理相关的功能。如果应用程序中不需要用户和组管理功能，可以通过禁用IDM引擎来减少资源消耗和提高性能。
    2. `disableEventRegistry`
        **作用**：控制是否禁用事件注册表（Event Registry）。
        - 事件注册表（Event Registry）：
            **功能**：Event Registry用于管理和处理流程中的事件。它可以定义和处理各种事件，如消息事件、信号事件和定时事件等。Event Registry提供了一种机制，可以在流程运行时动态处理和触发事件，增强了流程的灵活性和响应能力。
            **配置**：如果设置为true，则禁用事件注册表，这意味着将不会加载和初始化与事件处理相关的功能。如果应用程序中不需要事件处理功能，可以通过禁用事件注册表来减少资源消耗和提高性能。
```java
    // DATA MANAGERS /////////////////////////////////////////////////////////////

    protected AttachmentDataManager attachmentDataManager;
    protected CommentDataManager commentDataManager;
    protected DeploymentDataManager deploymentDataManager;
    protected EventLogEntryDataManager eventLogEntryDataManager;
    protected ExecutionDataManager executionDataManager;
    protected ActivityInstanceDataManager activityInstanceDataManager;
    protected HistoricActivityInstanceDataManager historicActivityInstanceDataManager;
    protected HistoricDetailDataManager historicDetailDataManager;
    protected HistoricProcessInstanceDataManager historicProcessInstanceDataManager;
    protected ModelDataManager modelDataManager;
    protected ProcessDefinitionDataManager processDefinitionDataManager;
    protected ProcessDefinitionInfoDataManager processDefinitionInfoDataManager;
    protected ResourceDataManager resourceDataManager;
    
    // ENTITY MANAGERS ///////////////////////////////////////////////////////////

    protected AttachmentEntityManager attachmentEntityManager;
    protected CommentEntityManager commentEntityManager;
    protected DeploymentEntityManager deploymentEntityManager;
    protected EventLogEntryEntityManager eventLogEntryEntityManager;
    protected ExecutionEntityManager executionEntityManager;
    protected ActivityInstanceEntityManager activityInstanceEntityManager;
    protected HistoricActivityInstanceEntityManager historicActivityInstanceEntityManager;
    protected HistoricDetailEntityManager historicDetailEntityManager;
    protected HistoricProcessInstanceEntityManager historicProcessInstanceEntityManager;
    protected ModelEntityManager modelEntityManager;
    protected ProcessDefinitionEntityManager processDefinitionEntityManager;
    protected ProcessDefinitionInfoEntityManager processDefinitionInfoEntityManager;
    protected ResourceEntityManager resourceEntityManager;

    protected DeploymentProcessDefinitionDeletionManager processDefinitionDeploymentDeletionManager;

```
    1. `AttachmentManager`
        作用：管理和操作流程实例中的附件数据。
        主要功能：
            创建、查询和删除附件。
            存储和检索附件的元数据和内容。
    2.  `CommentManager`
        作用：管理和操作流程实例中的评论和备注数据。
        主要功能：
            创建、查询和删除评论。
            存储和检索评论内容和元数据。
    3. `DeploymentManager`
        作用：管理和操作流程定义的部署数据。
        主要功能：
            创建、查询和删除流程部署。
            存储和检索流程定义的元数据。
    4. `EventLogEntryManager`
        作用：管理和操作流程实例中的事件日志数据。
        主要功能：
            创建、查询和删除事件日志条目。
            存储和检索事件日志的详细信息
    5. `ExecutionManager`
        作用：管理和操作流程实例的执行数据。
        主要功能：
            创建、查询和删除执行实例。
            存储和检索执行状态和变量。
    6. `ActivityInstanceManager`
        作用：管理和操作活动实例的数据。
        主要功能：
            创建、查询和删除活动实例。
            存储和检索活动的状态和执行信息。
    7. `HistoricActivityInstanceManager`
        作用：管理和操作历史活动实例的数据。
        主要功能：
            创建、查询和删除历史活动实例。
            存储和检索历史活动的执行记录。
    8. `HistoricDetailManager`
        作用：管理和操作历史详细数据。
        主要功能：
            创建、查询和删除历史详细记录。
            存储和检索流程实例执行的详细信息。
    9. `HistoricProcessInstanceManager`
        作用：管理和操作历史流程实例的数据。
        主要功能：
            创建、查询和删除历史流程实例。
            存储和检索流程实例的历史执行记录。
    10. `ModelManager`
        作用：管理和操作流程模型的数据。
        主要功能：
            创建、查询和删除流程模型。
            存储和检索模型的定义和元数据。
    11. `ProcessDefinitionManager`
        作用：管理和操作流程定义的数据。
        主要功能：
            创建、查询和删除流程定义。
            存储和检索流程定义的详细信息。
    12. `ProcessDefinitionInfoManager`
        作用：管理和操作流程定义信息的数据。
            主要功能：
            存储和检索与流程定义相关的附加信息。
            支持动态修改流程定义的信息。
    13. `ResourceManager`
        作用：管理和操作流程部署资源的数据。
        主要功能：
            创建、查询和删除部署资源。
            存储和检索流程定义文件和其他部署资源。

    **特殊管理器**
    14. `DeploymentProcessDefinitionDeletionManager`
        作用：管理流程定义删除过程中的部署相关操作。
        主要功能：
            处理流程定义删除时的相关部署操作。
            确保流程定义删除过程中相关资源和实体的正确处理。
```java

    // Candidate Manager

    protected CandidateManager candidateManager;
```
    CandidateManager 在 Flowable 引擎中是一个用于管理任务候选人（candidates）的组件。候选人是指在流程执行过程中可能被分配到特定任务的用户或组。CandidateManager 的主要作用是管理这些候选人与任务之间的关系，确保任务能够正确地分配给合适的执行者。
```java
    // History Manager

    protected HistoryManager historyManager;
    protected HistoryConfigurationSettings historyConfigurationSettings;

    protected boolean isAsyncHistoryEnabled;
```

    1. 作用：管理和处理流程实例的历史数据。
        主要功能：
            记录和存储流程实例的历史数据，包括任务执行、活动实例、变量变更等。
            提供接口查询和操作历史数据。
            确保流程执行过程中的所有历史信息被正确记录，便于审计、分析和报告。
    2. HistoryConfigurationSettings
        作用：配置和管理历史数据记录的设置。
        主要功能：
            定义历史数据的记录级别（如无历史记录、活动历史、完整历史等）。
            配置哪些类型的事件和数据需要记录历史。
            提供对历史记录行为的自定义设置。
    3. isAsyncHistoryEnabled
        作用：指示是否启用异步历史记录。
        异步历史记录：
            - 异步历史记录是指在流程执行过程中，历史数据的记录和存储操作是异步进行的，以提高流程执行的性能。
            - 当启用异步历史记录时，历史数据会被暂时存储在内存中，并在稍后由专门的线程异步写入数据库。
        主要优点：
            - 提高流程执行的性能，因为历史数据记录不会阻塞主要的流程执行线程。
            - 减少数据库写操作的延迟。 

```java
    // Change Tenant ID Manager

    protected ChangeTenantIdManager changeTenantIdManager;
    protected Set<String> changeTenantEntityTypes;
```
   1. ChangeTenantIdManager
        作用：管理和处理租户ID变更的操作。
        主要功能：
            提供接口来更改实体的租户ID。
            管理在多租户环境中，如何迁移或调整不同租户的数据。
            确保在更改租户ID时，所有相关数据和实体能够正确更新，以保持数据一致性。
    2. changeTenantEntityTypes
        作用：定义和存储可以更改租户ID的实体类型集合。
        主要功能：
            指定哪些实体类型可以进行租户ID变更操作。
            在执行租户ID变更时，限制和控制操作的范围，以确保只处理特定的实体类型。


```java
    // Job Manager

    protected JobManager jobManager;
```

    JobManager 的作用

    1. 作业创建和调度：
        JobManager负责创建和调度各种类型的作业。它可以根据作业的类型和触发条件将作业放入执行队列。
    2. 作业执行：
        管理作业的执行流程，包括作业的启动、执行和完成。确保作业在合适的时间和条件下执行。
    3. 作业重试和错误处理：
        管理和处理作业执行过程中可能发生的错误，支持作业的重试机制。根据配置，可以在作业失败后进行多次重试，确保作业的可靠性。
    4. 作业查询和管理：
     提供接口查询作业的状态、类型和执行历史。可以管理正在执行的作业以及历史作业记录。
    5. 作业删除和取消：
        支持删除和取消作业。例如，当一个流程实例被删除时，相关的作业也需要被删除，以防止孤立作业的执行。

```java
    // Dynamic state manager

    protected DynamicStateManager dynamicStateManager;

    protected ProcessInstanceMigrationManager processInstanceMigrationManager;
```
    1. `DynamicStateManager`
        作用：管理和执行流程实例的动态状态变更。
        主要功能：
            动态变更流程状态：在流程运行时，允许动态修改流程实例的状态，而无需重新部署流程定义。
            流程实例调整：支持对正在运行的流程实例进行调整，如跳转到另一个活动节点、取消某个活动、改变执行路径等。
            增强灵活性：使得流程在运行过程中能够更灵活地响应业务需求的变化。
    2. `ProcessInstanceMigrationManager`
        作用：管理和执行流程实例的迁移操作。
        主要功能：
            流程实例迁移：将正在运行的流程实例从一个流程定义版本迁移到另一个版本，确保流程实例可以继续运行在新的流程定义上。
            数据一致性：在迁移过程中，确保流程实例的数据和状态的一致性。
            支持版本升级：帮助企业在流程定义版本升级时，平滑地迁移现有流程实例，避免中断业务流程。

```java    
    // Decision table variable manager
    
    protected DecisionTableVariableManager decisionTableVariableManager;

    protected VariableServiceConfiguration variableServiceConfiguration;
    protected Collection<ServiceConfigurator<VariableServiceConfiguration>> variableServiceConfigurators;
    protected IdentityLinkServiceConfiguration identityLinkServiceConfiguration;
    protected Collection<ServiceConfigurator<IdentityLinkServiceConfiguration>> identityLinkServiceConfigurators;
    protected EntityLinkServiceConfiguration entityLinkServiceConfiguration;
    protected Collection<ServiceConfigurator<EntityLinkServiceConfiguration>> entityLinkServiceConfigurators;
    protected EventSubscriptionServiceConfiguration eventSubscriptionServiceConfiguration;
    protected Collection<ServiceConfigurator<EventSubscriptionServiceConfiguration>> eventSubscriptionServiceConfigurators;
    protected TaskServiceConfiguration taskServiceConfiguration;
    protected Collection<ServiceConfigurator<TaskServiceConfiguration>> taskServiceConfigurators;
    protected JobServiceConfiguration jobServiceConfiguration;
    protected Collection<ServiceConfigurator<JobServiceConfiguration>> jobServiceConfigurators;
    protected BatchServiceConfiguration batchServiceConfiguration;
    protected Collection<ServiceConfigurator<BatchServiceConfiguration>> batchServiceConfigurators;

    protected boolean enableEntityLinks;
```

    - DecisionTableVariableManager：管理决策表中的变量。
    - VariableServiceConfiguration及其配置器：配置和管理变量服务。
    - IdentityLinkServiceConfiguration及其配置器：配置和管理身份链接服务。
    - EntityLinkServiceConfiguration及其配置器：配置和管理实体链接服务。
    - EventSubscriptionServiceConfiguration及其配置器：配置和管理事件订阅服务。
    - TaskServiceConfiguration及其配置器：配置和管理任务服务。
    - JobServiceConfiguration及其配置器：配置和管理作业服务。
    - BatchServiceConfiguration及其配置器：配置和管理批处理服务。
    - enableEntityLinks：控制是否启用实体链接功能。

```java
    // Variable Aggregation

    protected VariableAggregator variableAggregator;

    protected Collection<String> dependentScopeTypes = new HashSet<>();
```

    1. VariableAggregator
        作用：聚合和处理流程实例中的变量。
        主要功能：
            聚合变量：收集和汇总来自不同范围（如子流程、任务等）的变量，并将其整合到主流程中。
            变量计算和处理：对变量进行计算、转换和处理，确保变量在流程实例中的一致性和正确性。
            自定义变量操作：允许自定义变量的聚合逻辑，以满足特定业务需求。
    2. dependentScopeTypes
        作用：定义和存储依赖的范围类型集合。
        主要功能：
            管理依赖范围类型：存储和管理变量聚合过程中依赖的不同范围类型。
            支持复杂变量依赖关系：确保在变量聚合过程中，能够正确识别和处理不同范围（如子流程、并行流程等）之间的依赖关系。
            
```java
    // DEPLOYERS //////////////////////////////////////////////////////////////////

    protected BpmnDeployer bpmnDeployer;
    protected AppDeployer appDeployer;
    protected BpmnParser bpmnParser;
    protected ParsedDeploymentBuilderFactory parsedDeploymentBuilderFactory;
    protected TimerManager timerManager;
    protected EventSubscriptionManager eventSubscriptionManager;
    protected BpmnDeploymentHelper bpmnDeploymentHelper;
    protected CachingAndArtifactsManager cachingAndArtifactsManager;
    protected ProcessDefinitionDiagramHelper processDefinitionDiagramHelper;
    protected DeploymentManager deploymentManager;

    protected int processDefinitionCacheLimit = -1; // By default, no limit
    protected DeploymentCache<ProcessDefinitionCacheEntry> processDefinitionCache;

    protected int processDefinitionInfoCacheLimit = -1; // By default, no limit
    protected DeploymentCache<ProcessDefinitionInfoCacheObject> processDefinitionInfoCache;

    protected int knowledgeBaseCacheLimit = -1;
    protected DeploymentCache<Object> knowledgeBaseCache;

    protected int appResourceCacheLimit = -1;
    protected DeploymentCache<Object> appResourceCache;

    protected AppResourceConverter appResourceConverter;
```
    **部署与解析相关组件**
    1. BpmnDeployer
        作用：负责BPMN流程定义的部署。
        主要功能：处理BPMN文件的解析和部署，将其转换为可执行的流程定义。
    2. AppDeployer
        作用：负责应用程序的部署。
        主要功能：处理应用程序相关资源的部署，包括应用配置和流程定义等。
    3. BpmnParser
        作用：解析BPMN文件。
        主要功能：将BPMN XML文件解析成内存中的流程模型，供引擎执行。
    4. ParsedDeploymentBuilderFactory
        作用：创建解析后的部署构建器。
        主要功能：生成解析后的部署对象，包含所有已解析的流程定义和资源。
    
    **定时与事件管理相关组件**
    5. TimerManager
        作用：管理流程中的定时器。
        主要功能：调度和执行定时任务，如定时启动事件和边界定时事件。
    6. EventSubscriptionManager
        作用：管理流程中的事件订阅。
        主要功能：处理事件订阅的创建、查询和删除，支持流程中的消息事件、信号事件等。

    **部署辅助相关组件**
    7. BpmnDeploymentHelper
        作用：辅助BPMN部署过程。
        主要功能：提供BPMN部署的辅助功能，如校验和转换。
    8. CachingAndArtifactsManager
        作用：管理部署缓存和工件。
        主要功能：处理部署过程中生成的缓存和工件，优化性能。
    9. ProcessDefinitionDiagramHelper
        作用：生成流程定义的图表。
        主要功能：根据流程定义生成流程图，供用户查看。
    10. DeploymentManager
        作用：整体管理部署过程。
        主要功能：协调部署过程中的各个步骤和组件，确保部署的完整性和一致性。

    **缓存配置**
    11. processDefinitionCacheLimit
        作用：定义流程定义缓存的限制。
        默认值：-1（无限制）
        主要功能：设置流程定义缓存的大小，优化内存使用。
    12. processDefinitionCache
        作用：缓存流程定义。
        主要功能：存储已部署的流程定义，以提高检索和执行效率。
    13. processDefinitionInfoCacheLimit
        作用：定义流程定义信息缓存的限制。
        默认值：-1（无限制）
        主要功能：设置流程定义信息缓存的大小，优化内存使用。
    14. processDefinitionInfoCache
        作用：缓存流程定义信息。
        主要功能：存储流程定义的附加信息，提高性能。
    15. knowledgeBaseCacheLimit
        作用：定义知识库缓存的限制。
        默认值：-1（无限制）
        主要功能：设置知识库缓存的大小，优化内存使用。
    16. knowledgeBaseCache
        作用：缓存知识库对象。
        主要功能：存储知识库对象，提高性能。
    17. appResourceCacheLimit
        作用：定义应用资源缓存的限制。
        默认值：-1（无限制）
        主要功能：设置应用资源缓存的大小，优化内存使用。
    18. appResourceCache
        作用：缓存应用资源。
        主要功能：存储应用相关资源，提高性能。

    **资源转换相关组件**
    19. AppResourceConverter
        作用：转换应用资源。
        主要功能：处理应用资源的转换，如将应用配置文件转换为内部模型。

```java
    // JOB EXECUTOR /////////////////////////////////////////////////////////////

    protected List<JobHandler> customJobHandlers;
    protected Map<String, JobHandler> jobHandlers;
    protected List<AsyncRunnableExecutionExceptionHandler> customAsyncRunnableExecutionExceptionHandlers;
    protected boolean addDefaultExceptionHandler = true;

    protected Map<String, HistoryJobHandler> historyJobHandlers;
    protected List<HistoryJobHandler> customHistoryJobHandlers;
```
    1. `customJobHandlers`
        作用：定义自定义作业处理程序的列表。
        主要功能：
            允许用户添加自定义的作业处理程序，以处理特定类型的作业。
    2. `jobHandlers`
        作用：映射作业类型到对应的作业处理程序。
        主要功能：
            管理作业类型和其对应的处理程序之间的映射关系，确保每种作业都能找到合适的处理程序。
    3. `customAsyncRunnableExecutionExceptionHandlers`
        作用：定义自定义的异步任务执行异常处理程序的列表。
        主要功能：
            允许用户添加自定义的异常处理程序，以处理异步任务执行过程中发生的异常。            
    4. `addDefaultExceptionHandler`
        作用：指示是否添加默认的异常处理程序。
        默认值：true
        主要功能：
            如果设置为true，则会添加默认的异步任务执行异常处理程序。用户可以选择禁用此默认处理程序以仅使用自定义的处理程序。
    5. `historyJobHandlers`
        作用：映射历史作业类型到对应的历史作业处理程序。
        主要功能：
            管理历史作业类型和其对应的处理程序之间的映射关系，确保每种历史作业都能找到合适的处理程序。
    6. `customHistoryJobHandlers`
        作用：定义自定义历史作业处理程序的列表。
        主要功能：
            允许用户添加自定义的历史作业处理程序，以处理特定类型的历史作业。
    
    总结
        - customJobHandlers：允许定义自定义的作业处理程序。
        - jobHandlers：映射作业类型到对应的作业处理程序。
        - customAsyncRunnableExecutionExceptionHandlers：允许定义自定义的异步任务执行异常处理程序。
        - addDefaultExceptionHandler：指示是否添加默认的异常处理程序。
        - historyJobHandlers：映射历史作业类型到对应的历史作业处理程序。
        - customHistoryJobHandlers：允许定义自定义的历史作业处理程序。
```java
    // HELPERS //////////////////////////////////////////////////////////////////
    protected ProcessInstanceHelper processInstanceHelper;
    protected ListenerNotificationHelper listenerNotificationHelper;
    protected FormHandlerHelper formHandlerHelper;
    
    protected CaseInstanceService caseInstanceService;
```
    1. `ProcessInstanceHelper`
        作用：帮助创建和管理流程实例。
        主要功能：
            提供辅助方法来启动流程实例。
            处理流程实例启动过程中的初始化逻辑。
            管理流程实例的生命周期。
    2. `ListenerNotificationHelper`
        作用：管理和发送监听器通知。
        主要功能：
            触发流程中的各种监听器（如任务监听器、事件监听器等）。
            确保在特定流程事件发生时，相关监听器能够被正确通知和执行。            
    3. `FormHandlerHelper`
        作用：帮助处理和管理表单。
        主要功能：
            处理表单的初始化和提交。
            管理表单与流程实例或任务的关联。
            确保表单数据的正确存储和检索。
    4. `CaseInstanceService`
        作用：管理和操作案例实例。
        主要功能：
            创建和管理案例实例（Case Instances）。
            提供接口查询和操作案例实例。
            支持案例实例的启动、暂停、恢复和终止等操作。        
    **总结**                
        - ProcessInstanceHelper：帮助创建和管理流程实例，处理启动和生命周期管理。
        - ListenerNotificationHelper：管理和发送监听器通知，确保流程事件发生时触发相关监听器。
        - FormHandlerHelper：处理和管理表单，确保表单数据的正确存储和使用。
        - CaseInstanceService：管理和操作案例实例，提供启动、查询、管理生命周期的功能。
```java
    // ASYNC EXECUTOR ///////////////////////////////////////////////////////////

    /**
     * The number of retries for a job.
     */
    protected int asyncExecutorNumberOfRetries = 3;

    /**
     * The configuration of the task executor for the async executor.
     * This is only applicable when using the {@link DefaultAsyncTaskExecutor}
     */
    protected AsyncTaskExecutorConfiguration asyncExecutorTaskExecutorConfiguration;

    /**
     * The queue onto which jobs will be placed before they are actually executed. Threads form the async executor threadpool will take work from this queue.
     * <p>
     * By default null. If null, an {@link ArrayBlockingQueue} will be created of size defined in the {@link #asyncExecutorTaskExecutorConfiguration}.
     * <p>
     * When the queue is full, the job will be executed by the calling thread (ThreadPoolExecutor.CallerRunsPolicy())
     * <p>
     * (This property is only applicable when using the {@link DefaultAsyncJobExecutor}).
     */
    protected BlockingQueue<Runnable> asyncExecutorThreadPoolQueue;

    /**
     * The thread factory that the async task executor should use.
     */
    protected ThreadFactory asyncExecutorThreadFactory;

    /**
     * The amount of time (in milliseconds) a job can maximum be in the 'executable' state before being deemed expired.
     * Note that this won't happen when using the threadpool based executor, as the acquire thread will fetch these kind of jobs earlier.
     * <p>
     * By default 24 hours, as this should be a very exceptional case.
     */
    protected int asyncExecutorResetExpiredJobsMaxTimeout = 24 * 60 * 60 * 1000;

    protected AsyncTaskExecutorConfiguration asyncTaskInvokerTaskExecutorConfiguration;

    protected AsyncJobExecutorConfiguration asyncExecutorConfiguration = new AsyncJobExecutorConfiguration();
    protected AsyncJobExecutorConfiguration asyncHistoryExecutorConfiguration;

    // More info: see similar async executor properties.
    protected int asyncHistoryExecutorNumberOfRetries = 10;
    protected AsyncTaskExecutorConfiguration asyncHistoryExecutorTaskExecutorConfiguration;
    protected BlockingQueue<Runnable> asyncHistoryExecutorThreadPoolQueue;

    protected List<String> enabledJobCategories;
    protected String jobExecutionScope;
    protected String historyJobExecutionScope;

    protected String batchStatusTimeCycleConfig = "30 * * * * ?";

    /**
     * Allows to define a custom factory for creating the {@link Runnable} that is executed by the async executor.
     * <p>
     * (This property is only applicable when using the {@link DefaultAsyncJobExecutor}).
     */
    protected ExecuteAsyncRunnableFactory asyncExecutorExecuteAsyncRunnableFactory;
    protected InternalJobParentStateResolver internalJobParentStateResolver;
```

    1. asyncExecutorNumberOfRetries
        作用：设置异步作业的重试次数。
        默认值：3次
        主要功能：
            确定异步作业在失败后应重试的次数。
    2. asyncExecutorTaskExecutorConfiguration
        作用：配置异步任务执行器的设置。
        主要功能：
            定义异步任务执行器的行为，如线程池大小、队列大小等。
    3. asyncExecutorThreadPoolQueue
        作用：异步执行线程池的队列。
        主要功能：
            存放等待执行的作业，线程池中的线程将从此队列中获取作业执行。
            如果为空，将默认创建一个ArrayBlockingQueue。
    4. asyncExecutorThreadFactory
        作用：用于创建异步任务执行线程的工厂。
        主要功能：
            定制化创建执行异步任务的线程。
    5. 作用：设置作业处于“可执行”状态的最长时间（毫秒）。
        默认值：24小时
        主要功能：
            确定作业在被视为过期前可以保留在可执行状态的最大时间。      
    6. asyncTaskInvokerTaskExecutorConfiguration
        作用：配置异步任务调用器的设置。
        主要功能：
            定义异步任务调用器的行为。  
    7. asyncExecutorConfiguration
        作用：配置异步作业执行器的设置。
        主要功能：
            定义异步作业执行器的行为和设置。                            
    8. asyncHistoryExecutorConfiguration
        作用：配置异步历史作业执行器的设置。
        主要功能：
            定义异步历史作业执行器的行为和设置。
    9. asyncHistoryExecutorNumberOfRetries
        作用：设置异步历史作业的重试次数。
        默认值：10次
        主要功能：
            确定异步历史作业在失败后应重试的次数。   
    10. asyncHistoryExecutorTaskExecutorConfiguration
        作用：配置异步历史作业任务执行器的设置。
        主要功能：
            定义异步历史作业任务执行器的行为和设置。                     
    11. asyncHistoryExecutorThreadPoolQueue
        作用：异步历史执行线程池的队列。
        主要功能：
            存放等待执行的历史作业，线程池中的线程将从此队列中获取作业执行。

    **作业执行相关配置**
    12. enabledJobCategories
        作用：启用的作业类别列表。
        主要功能：
            指定哪些类别的作业应被执行。 
    13. jobExecutionScope
        作用：作业执行范围。
        主要功能：
            指定作业的执行范围，控制作业在哪些环境或条件下执行。
    14. historyJobExecutionScope
        作用：历史作业执行范围。
        主要功能：
            指定历史作业的执行范围，控制历史作业在哪些环境或条件下执行。
    15. batchStatusTimeCycleConfig
        作用：批处理状态时间周期配置。
        默认值："30 * * * * ?"
        主要功能：
         定义批处理任务状态检查的时间周期。 
**自定义执行器配置**
    1.  asyncExecutorExecuteAsyncRunnableFactory
        作用：定义一个自定义工厂，用于创建异步执行的Runnable。
        主要功能：
            提供自定义的Runnable创建逻辑。
    2.  internalJobParentStateResolver
        作用：内部作业父状态解析器。
        主要功能：
            解析和确定作业的父状态。
    
```java
    // JUEL functions ///////////////////////////////////////////////////////////
    protected List<FlowableFunctionDelegate> flowableFunctionDelegates;
    protected List<FlowableFunctionDelegate> customFlowableFunctionDelegates;
    protected List<FlowableAstFunctionCreator> astFunctionCreators;
```

**Flowable函数委托**
    1. flowableFunctionDelegates
        作用：管理和执行Flowable内置的函数委托。
        主要功能：
            提供一组内置的函数委托，这些委托可以在Flowable表达式和脚本中使用。
            允许在流程定义中调用预定义的函数以实现特定的业务逻辑。
    2. customFlowableFunctionDelegates
        作用：管理和执行用户自定义的Flowable函数委托。
        主要功能：
            允许用户添加自定义的函数委托，以扩展Flowable的功能。
            用户可以通过实现FlowableFunctionDelegate接口来定义自己的函数，并在流程定义中使用这些函数。
    3. astFunctionCreators
        作用：管理和创建AST函数。
        主要功能：
            提供创建AST函数的能力，这些函数可以在Flowable表达式中使用。
            允许用户通过实现FlowableAstFunctionCreator接口来自定义AST函数的创建逻辑。
**总结**
       - flowableFunctionDelegates：管理和执行Flowable内置的函数委托。
       - customFlowableFunctionDelegates：管理和执行用户自定义的Flowable函数委托。
       - astFunctionCreators：管理和创建AST函数，提供扩展Flowable表达式语言的能力。

```java
    // BPMN PARSER //////////////////////////////////////////////////////////////

    protected List<BpmnParseHandler> preBpmnParseHandlers;
    protected List<BpmnParseHandler> postBpmnParseHandlers;
    protected List<BpmnParseHandler> customDefaultBpmnParseHandlers;
    protected ActivityBehaviorFactory activityBehaviorFactory;
    protected ListenerFactory listenerFactory;
    protected BpmnParseFactory bpmnParseFactory;
```
**BPMN解析处理程序**

    1. preBpmnParseHandlers
        作用：在BPMN解析开始之前执行的处理程序列表。
        主要功能：
            允许在正式解析BPMN XML文件之前进行一些预处理工作，如准备数据、设置上下文等。
    2. postBpmnParseHandlers
        作用：在BPMN解析完成之后执行的处理程序列表。
        主要功能：
            允许在解析完BPMN XML文件之后进行一些后处理工作，如校验解析结果、修改解析后的模型等。
    3. customDefaultBpmnParseHandlers
        作用：自定义的默认BPMN解析处理程序列表。
        主要功能：
            允许用户添加自定义的默认解析处理程序，以替代或扩展Flowable引擎的默认解析逻辑。

**行为和监听器工厂**
    4. ActivityBehaviorFactory
        作用：创建流程活动的行为实例。
        主要功能：
            负责生成各种活动节点（如用户任务、服务任务、网关等）的行为实例，定义这些节点在流程执行中的具体行为。
    5. ListenerFactory
        作用：创建监听器实例。
        主要功能：
            负责生成流程执行过程中各种事件（如任务创建、任务完成、流程启动等）的监听器实例。            
    6. BpmnParseFactory
        作用：创建BPMN解析器实例。
        主要功能：
            负责生成用于解析BPMN XML文件的解析器实例，并将解析结果转换为内存中的流程模型。
**总结**            
        - preBpmnParseHandlers：在BPMN解析开始之前执行预处理操作。
        - postBpmnParseHandlers：在BPMN解析完成之后执行后处理操作。
        - customDefaultBpmnParseHandlers：自定义默认BPMN解析处理程序。
        - ActivityBehaviorFactory：创建流程活动的行为实例。
        - ListenerFactory：创建监听器实例。
        - BpmnParseFactory：创建BPMN解析器实例。
```java
    // PROCESS VALIDATION ///////////////////////////////////////////////////////

    protected ProcessValidator processValidator;
    protected ServiceTaskValidator customServiceTaskValidator;
```
**流程验证相关组件**
    1. ProcessValidator
        作用：用于验证整个流程定义的正确性。
        主要功能：
            检查流程定义中的结构和语义是否正确。
            验证流程模型是否符合BPMN标准和业务规则。
            提供错误和警告信息，帮助开发者修正流程定义中的问题。
    2. ServiceTaskValidator
        作用：用于验证服务任务的正确性。
        主要功能：
            检查服务任务配置是否正确，例如任务类型、表达式、类路径等。
            验证服务任务是否符合业务逻辑和技术要求。
            提供自定义的服务任务验证逻辑，扩展默认验证器的功能。
**总结**
    - ProcessValidator：用于验证整个流程定义的正确性，确保流程模型符合BPMN标准和业务规则。
    - ServiceTaskValidator：用于验证服务任务的正确性，检查任务配置和业务逻辑，支持自定义验证。            

```java
    // OTHER ////////////////////////////////////////////////////////////////////

    protected List<FormEngine> customFormEngines;
    protected Map<String, FormEngine> formEngines;

    protected List<AbstractFormType> customFormTypes;
    protected FormTypes formTypes;

    protected List<VariableType> customPreVariableTypes;
    protected List<VariableType> customPostVariableTypes;
    protected VariableTypes variableTypes;

    protected InternalHistoryVariableManager internalHistoryVariableManager;
    protected InternalTaskVariableScopeResolver internalTaskVariableScopeResolver;
    protected InternalHistoryTaskManager internalHistoryTaskManager;
    protected InternalTaskAssignmentManager internalTaskAssignmentManager;
    protected IdentityLinkEventHandler identityLinkEventHandler;
    protected InternalTaskLocalizationManager internalTaskLocalizationManager;
    protected InternalProcessLocalizationManager internalProcessLocalizationManager;
    protected InternalProcessDefinitionLocalizationManager internalProcessDefinitionLocalizationManager;
    protected InternalJobManager internalJobManager;
    protected InternalJobCompatibilityManager internalJobCompatibilityManager;

    protected Map<String, List<RuntimeInstanceStateChangeCallback>> processInstanceStateChangedCallbacks;

    protected List<ProcessInstanceMigrationCallback> processInstanceMigrationCallbacks;
    
    /**
     * This flag determines whether variables of the type 'serializable' will be tracked. This means that, when true, in a JavaDelegate you can write
     * <p>
     * MySerializableVariable myVariable = (MySerializableVariable) execution.getVariable("myVariable"); myVariable.setNumber(123);
     * <p>
     * And the changes to the java object will be reflected in the database. Otherwise, a manual call to setVariable will be needed.
     * <p>
     * By default true for backwards compatibility.
     */
    protected boolean serializableVariableTypeTrackDeserializedObjects = true;

    /**
     * This flag determines whether variables of the type 'json' and 'longJson' will be tracked.
     * <p>
     * This means that, when true, in a JavaDelegate you can write:
     * <pre><code>
     *     JsonNode jsonNode = (JsonNode) execution.getVariable("customer");
     *     customer.put("name", "Kermit");
     * </code></pre>
     * And the changes to the JsonNode will be reflected in the database. Otherwise, a manual call to setVariable will be needed.
     */
    protected boolean jsonVariableTypeTrackObjects = true;

    /**
     * Whether the Parallel Multi instance should perform the leave operation through an async exclusive job.
     * When this is true then non exclusive parallel multi instances can run in non exclusive asynchronously without an exception being thrown.
     */
    protected boolean parallelMultiInstanceAsyncLeave = true;

    protected ExpressionManager expressionManager;
    protected Collection<Consumer<ExpressionManager>> expressionManagerConfigurers;
    protected Collection<ELResolver> preDefaultELResolvers;
    protected Collection<ELResolver> preBeanELResolvers;
    protected Collection<ELResolver> postDefaultELResolvers;
```
**表单引擎和表单类型相关配置**
    1. customFormEngines
        作用：自定义表单引擎列表。
        主要功能：
            允许用户添加自定义表单引擎以扩展Flowable的表单功能。
    2. formEngines
        作用：表单引擎映射。
        主要功能：
            管理表单引擎的映射关系，支持不同类型的表单引擎。
    3. customFormTypes
        作用：自定义表单类型列表。
        主要功能：
            允许用户添加自定义表单类型以扩展Flowable的表单处理能力。
    4. formTypes
        作用：表单类型管理器。
        主要功能：
            管理和提供所有支持的表单类型。
**变量类型相关配置**
    5. customPreVariableTypes
        作用：自定义变量类型列表（前置）。
        主要功能：
            允许用户在默认变量类型之前添加自定义变量类型。
    6. customPostVariableTypes
        作用：自定义变量类型列表（后置）。
        主要功能：
            允许用户在默认变量类型之后添加自定义变量类型。
    7. variableTypes
        作用：变量类型管理器。
        主要功能：
            管理和提供所有支持的变量类型。
**内部管理器和事件处理**
    8. internalHistoryVariableManager
        作用：内部历史变量管理器。
        主要功能：
            管理历史变量的创建、更新和删除。     
    9. internalTaskVariableScopeResolver
        作用：内部任务变量范围解析器。
        主要功能：
            解析任务变量的作用范围。
    10. internalHistoryTaskManager
        作用：内部历史任务管理器。
        主要功能：
            管理历史任务的记录和维护。            
    11. internalTaskAssignmentManager
        作用：内部任务分配管理器。
        主要功能：
            管理任务的分配和指派。
    12. identityLinkEventHandler
        作用：身份链接事件处理器。
        主要功能：
            处理身份链接相关的事件。
    13. internalTaskLocalizationManager
        作用：内部任务本地化管理器。
        主要功能：
            管理任务的本地化信息。            
    14. internalProcessLocalizationManager
        作用：内部流程本地化管理器。
        主要功能：
            管理流程实例的本地化信息。            
    15. internalProcessDefinitionLocalizationManager
        作用：内部流程定义本地化管理器。
        主要功能：
            管理流程定义的本地化信息。
    16. internalJobManager
        作用：内部作业管理器。
        主要功能：
            管理作业的创建、执行和删除。            
    17. internalJobCompatibilityManager
        作用：内部作业兼容性管理器。
        主要功能：
            管理作业的兼容性问题，确保作业在不同版本间的兼容性。
**回调和其他配置**
    18. processInstanceStateChangedCallbacks
        作用：流程实例状态变更回调列表。
        主要功能：
            处理流程实例状态变更时的回调逻辑。
    19. processInstanceMigrationCallbacks
        作用：流程实例迁移回调列表。
        主要功能：
            处理流程实例迁移时的回调逻辑。
**变量跟踪配置**
    20. serializableVariableTypeTrackDeserializedObjects
        作用：是否跟踪可序列化变量的反序列化对象。
        默认值：true
        主要功能：
            当设置为true时，确保在JavaDelegate中对可序列化变量的更改能反映在数据库中。
    21. jsonVariableTypeTrackObjects
        作用：是否跟踪JSON和longJson类型变量的对象。
        主要功能：
         当设置为true时，确保在JavaDelegate中对JSON变量的更改能反映在数据库中。
    22. parallelMultiInstanceAsyncLeave
        作用：并行多实例是否通过异步独占作业进行leave操作。
        主要功能：
         当设置为true时，非独占并行多实例可以异步非独占运行而不会抛出异常。
**表达式管理配置**  
    23. expressionManager
        作用：表达式管理器。
        主要功能：
            管理和解析流程定义中的表达式。
    24. expressionManagerConfigurers
        作用：表达式管理器配置器集合。
        主要功能：
         允许添加配置器以自定义表达式管理器的行为。
    25. preDefaultELResolvers
        作用：默认EL解析器之前的解析器集合。
        主要功能：
            允许在默认EL解析器之前添加自定义解析器。
    26. preBeanELResolvers
        作用：Bean EL解析器之前的解析器集合。
        主要功能：
            允许在Bean EL解析器之前添加自定义解析器。
    27. postDefaultELResolvers
        作用：默认EL解析器之后的解析器集合。
        主要功能：
            允许在默认EL解析器之后添加自定义解析器。
**总结**
    - 表单引擎和表单类型相关配置：管理和扩展Flowable的表单处理功能。
    - 变量类型相关配置：管理和扩展Flowable的变量处理能力。
    - 内部管理器和事件处理：提供内部管理和事件处理机制，确保Flowable引擎的稳定运行。
    - 回调和其他配置：处理流程实例状态变更和迁移时的回调逻辑。
    - 变量跟踪配置：确保变量在JavaDelegate中更改时能正确反映在数据库中。
    - 表达式管理配置：管理和解析流程定义中的表达式，支持自定义解析器。
```java    
    // SCRIPTING ///////////////////////////////////////////////////////
    protected List<String> customScriptingEngineClasses;
    protected ScriptingEngines scriptingEngines;
    protected ScriptBindingsFactory scriptBindingsFactory;
    protected List<ResolverFactory> resolverFactories;
    protected Collection<ResolverFactory> preDefaultResolverFactories;
    protected Collection<ResolverFactory> postDefaultResolverFactories;
```
**脚本引擎相关配置**
    1. customScriptingEngineClasses
        作用：自定义脚本引擎类列表。
        主要功能：
            允许用户添加自定义的脚本引擎类以扩展Flowable的脚本执行能力。
    2. scriptingEngines
        作用：脚本引擎管理器。
        主要功能：
            管理和提供Flowable中使用的各种脚本引擎。
            支持不同的脚本语言（如Groovy、JavaScript等）的执行。
**脚本绑定工厂**
    3. ScriptBindingsFactory
        作用：脚本绑定工厂。
        主要功能：
            创建脚本执行时的绑定对象，包含变量和上下文信息。
            提供脚本执行所需的上下文数据和变量。
**解析器工厂相关配置**            
    4. resolverFactories
        作用：解析器工厂列表。
        主要功能：
            管理并提供用于解析脚本中的变量和表达式的工厂。
            支持解析脚本执行过程中所需的变量和上下文。
    5. preDefaultResolverFactories
        作用：默认解析器之前的解析器工厂集合。
        主要功能：
            允许在默认解析器之前添加自定义解析器工厂。
            优先级高于默认解析器的解析器工厂。
    6. postDefaultResolverFactories
        作用：默认解析器之后的解析器工厂集合。
        主要功能：
            允许在默认解析器之后添加自定义解析器工厂。
            优先级低于默认解析器的解析器工厂。
**总结**    
- customScriptingEngineClasses：定义自定义脚本引擎类以扩展Flowable的脚本执行能力。
- scriptingEngines：管理和提供Flowable中的脚本引擎。
- ScriptBindingsFactory：创建脚本执行时的上下文绑定。
- resolverFactories：提供解析脚本执行过程中变量和表达式的工厂。
- preDefaultResolverFactories：在默认解析器之前执行自定义解析逻辑的解析器工厂集合。
- postDefaultResolverFactories：在默认解析器之后执行自定义解析逻辑的解析器工厂集合。

```java   
    // END SCRIPTING
    protected boolean isExpressionCacheEnabled = true;
    protected int expressionCacheSize = 4096;
    protected int expressionTextLengthCacheLimit = -1; // negative value to have no max length
```
    1. isExpressionCacheEnabled
        作用：启用或禁用表达式缓存。
        默认值：true
        主要功能：
         控制是否启用表达式缓存以提高性能。
    2. expressionCacheSize
        作用：表达式缓存的大小。
        默认值：4096
        主要功能：
         设置表达式缓存的最大条目数。
    3. expressionTextLengthCacheLimit
        作用：表达式文本长度的缓存限制。
        默认值：-1（无限制）
        主要功能：
            控制表达式缓存时的最大文本长度，负值表示没有限制。
```java
    protected BusinessCalendarManager businessCalendarManager;

    protected StartProcessInstanceInterceptor startProcessInstanceInterceptor;
    protected CreateUserTaskInterceptor createUserTaskInterceptor;
    protected UserTaskStateInterceptor userTaskStateInterceptor;
    protected CreateExternalWorkerJobInterceptor createExternalWorkerJobInterceptor;
    protected IdentityLinkInterceptor identityLinkInterceptor;
    protected ProcessInstanceQueryInterceptor processInstanceQueryInterceptor;
    protected ExecutionQueryInterceptor executionQueryInterceptor;
    protected HistoricProcessInstanceQueryInterceptor historicProcessInstanceQueryInterceptor;
    protected TaskQueryInterceptor taskQueryInterceptor;
    protected HistoricTaskQueryInterceptor historicTaskQueryInterceptor;
```
    4. BusinessCalendarManager
        作用：管理业务日历。
        主要功能：
            提供业务日历相关的功能，如计算工作日、节假日等。
    5. StartProcessInstanceInterceptor
        作用：启动流程实例的拦截器。
        主要功能：
            在启动流程实例之前执行自定义逻辑。
    6. CreateUserTaskInterceptor
        作用：创建用户任务的拦截器。
        主要功能：
            在创建用户任务之前执行自定义逻辑。
    7. UserTaskStateInterceptor
        作用：用户任务状态的拦截器。
        主要功能：
            在用户任务状态变化时执行自定义逻辑。
    8. CreateExternalWorkerJobInterceptor
        作用：创建外部工作作业的拦截器。
        主要功能：
            在创建外部工作作业之前执行自定义逻辑。
    9. IdentityLinkInterceptor
        作用：身份链接的拦截器。
        主要功能：
            在身份链接创建、删除时执行自定义逻辑。
    10. ProcessInstanceQueryInterceptor
        作用：流程实例查询拦截器。
        主要功能：
            在流程实例查询之前执行自定义逻辑。
    11. ExecutionQueryInterceptor
        作用：执行查询拦截器。
        主要功能：
            在执行查询之前执行自定义逻辑。
    12. HistoricProcessInstanceQueryInterceptor
        作用：历史流程实例查询拦截器。
        主要功能：
            在历史流程实例查询之前执行自定义逻辑。
    13. TaskQueryInterceptor
        作用：任务查询拦截器。
        主要功能：
            在任务查询之前执行自定义逻辑。
    14. HistoricTaskQueryInterceptor
        作用：历史任务查询拦截器。
        主要功能：
            在历史任务查询之前执行自定义逻辑。
    
```java  
    protected String wsSyncFactoryClassName = DEFAULT_WS_SYNC_FACTORY;
    protected XMLImporterFactory wsWsdlImporterFactory;
    protected ConcurrentMap<QName, URL> wsOverridenEndpointAddresses = new ConcurrentHashMap<>();
```
**Web服务同步和事件处理**
    15. wsSyncFactoryClassName
        作用：Web服务同步工厂类名。
        默认值：DEFAULT_WS_SYNC_FACTORY
        主要功能：
            指定用于Web服务同步的工厂类。
    16. wsWsdlImporterFactory
        作用：WSDL导入工厂。
        主要功能：
         提供导入WSDL的功能。
    17. wsOverridenEndpointAddresses
        作用：覆盖的Web服务端点地址。
        主要功能：
            存储覆盖的Web服务端点地址。
```java
    protected DelegateInterceptor delegateInterceptor;

    protected Map<String, EventHandler> eventHandlers;
    protected List<EventHandler> customEventHandlers;
```
    18. DelegateInterceptor
        作用：委托拦截器。
        主要功能：
            在执行委托（如JavaDelegate）时执行自定义逻辑。
    19. eventHandlers
        作用：事件处理器映射。
        主要功能：
            管理事件类型与其处理器的映射关系。
    20. customEventHandlers
        作用：自定义事件处理器列表。
        主要功能：
            允许用户添加自定义事件处理器。
           
```java
    protected FailedJobCommandFactory failedJobCommandFactory;
```
**失败作业处理** 
    21. FailedJobCommandFactory
        作用：失败作业命令工厂。
        主要功能：
            提供处理失败作业的命令工厂。
**表单字段验证**                
```java

    protected FormFieldHandler formFieldHandler;
    protected boolean isFormFieldValidationEnabled;
    
```    
    22. FormFieldHandler
        作用：表单字段处理器。
        主要功能：
            处理表单字段的创建和验证。
    23. isFormFieldValidationEnabled
        作用：是否启用表单字段验证。
        主要功能：
            控制是否启用表单字段的验证功能。   
**事件注册表配置**                         
```java
    protected EventRegistryEventConsumer eventRegistryEventConsumer;
```
    24.EventRegistryEventConsumer
        作用：事件注册表事件消费者。
        主要功能：
            处理和消费事件注册表中的事件。
```java
    /**
     * Whether process instances should be start asynchronously by the default {@link EventRegistryEventConsumer}.
     * This is a fallback applied for all events. We suggest modelling your processes appropriately, i.e. making the start event async.
     */
    protected boolean eventRegistryStartProcessInstanceAsync = false;

    /**
     * Whether the check for unique process instances should be done with a lock.
     * We do not recommend changing this property, unless you have been explicitly asked by a Flowable maintainer.
     */
    protected boolean eventRegistryUniqueProcessInstanceCheckWithLock = true;

    /**
     * The amount of time for the lock of a unique start event.
     */
    protected Duration eventRegistryUniqueProcessInstanceStartLockTime = Duration.ofMinutes(10);
```

   25. eventRegistryStartProcessInstanceAsync
        作用：是否异步启动流程实例。
        主要功能：
            控制是否异步启动流程实例。
    26. eventRegistryUniqueProcessInstanceCheckWithLock
        作用：是否使用锁检查唯一流程实例。
        主要功能：
            控制检查唯一流程实例时是否使用锁。            
    27. eventRegistryUniqueProcessInstanceStartLockTime
        作用：唯一流程实例启动锁定时间。
        主要功能：
            设置唯一流程实例启动时的锁定时间。

```java
    /**
     * Set this to true if you want to have extra checks on the BPMN xml that is parsed. See http://www.jorambarrez.be/blog/2013/02/19/uploading-a-funny-xml -can-bring-down-your-server/
     * <p>
     * Unfortunately, this feature is not available on some platforms (JDK 6, JBoss), hence the reason why it is disabled by default. If your platform allows the use of StaxSource during XML parsing,
     * do enable it.
     */
    protected boolean enableSafeBpmnXml;
    /**
     * The following settings will determine the amount of entities loaded at once when the engine needs to load multiple entities (eg. when suspending a process definition with all its process
     * instances).
     * <p>
     * The default setting is quite low, as not to surprise anyone with sudden memory spikes. Change it to something higher if the environment Flowable runs in allows it.
     */
    protected int batchSizeProcessInstances = 25;
    protected int batchSizeTasks = 25;
```

**安全和批处理配置**    
    28. enableSafeBpmnXml
        作用：是否启用安全的BPMN XML解析。
        主要功能：
            控制是否启用安全的BPMN XML解析，防止恶意XML文件攻击。
    29. batchSizeProcessInstances
        作用：流程实例批处理大小。
        默认值：25
        主要功能：
            设置一次加载的流程实例数量。
    30. batchSizeTasks
        作用：任务批处理大小。
        默认值：25
        主要功能：
            设置一次加载的任务数量。  

```java
    // Event logging to database
    protected boolean enableDatabaseEventLogging;
    protected boolean enableHistoricTaskLogging;
```

**事件日志记录**
    1. enableDatabaseEventLogging
        作用：启用或禁用数据库事件日志记录。需要记录流程执行中的重要事件和历史任务信息时，可以启用这些配置。
        主要功能：
          控制是否将事件日志记录到数据库中，以便进行审计和监控。
    2. enableHistoricTaskLogging
        作用：启用或禁用历史任务日志记录。在需要严格控制字段注入和委托表达式使用时，配置该选项以确保安全性。
        主要功能：
            控制是否记录历史任务的日志信息，以便进行审计和监控。
```java
    /**
     * Using field injection together with a delegate expression for a service task / execution listener / task listener is not thread-sade , see user guide section 'Field Injection' for more
     * information.
     * <p>
     * Set this flag to false to throw an exception at runtime when a field is injected and a delegateExpression is used.
     *
     * @since 5.21
     */
    protected DelegateExpressionFieldInjectionMode delegateExpressionFieldInjectionMode = DelegateExpressionFieldInjectionMode.MIXED;
```
**字段注入模式**
    3. delegateExpressionFieldInjectionMode
        作用：配置委托表达式的字段注入模式。需要向后兼容Flowable 5或自定义作业处理逻辑时，配置这些处理器。
        主要功能：
            控制在使用字段注入和委托表达式时的行为。
            如果设置为MIXED，则允许混合使用字段注入和委托表达式；如果设置为其他模式，则在不安全情况下抛出异常。
```java
    protected List<Object> flowable5JobProcessors = Collections.emptyList();
    protected List<JobProcessor> jobProcessors = Collections.emptyList();
    protected List<HistoryJobProcessor> historyJobProcessors = Collections.emptyList();
```    
**作业处理器**
    4. flowable5JobProcessors
        作用：Flowable 5的作业处理器列表。在调试和开发阶段，需要详细记录执行树信息以便分析和诊断问题时，启用该选项。
        主要功能：
            支持Flowable 5中定义的作业处理器，用于向后兼容。
    5. jobProcessors
        作用：作业处理器列表。需要优化Flowable引擎性能时，通过配置性能设置来实现。
        主要功能：
            处理和管理作业的创建、执行和删除。    
    6. historyJobProcessors
        作用：历史作业处理器列表。
        主要功能：
            处理和管理历史作业的记录和维护。       
```java
    /**
     * Enabled a very verbose debug output of the execution tree whilst executing operations. Most useful for core engine developers or people fiddling around with the execution tree.
     */
    protected boolean enableVerboseExecutionTreeLogging;

    protected PerformanceSettings performanceSettings = new PerformanceSettings();
```            
**执行树日志记录**
    7. enableVerboseExecutionTreeLogging
        作用：启用或禁用详细的执行树日志记录。
        主要功能：
           控制是否记录详细的执行树日志，主要用于调试和开发。
    8. performanceSettings
        作用：性能设置。
        主要功能：
            提供性能相关的配置选项，以优化Flowable引擎的性能。               
```java
    // agenda factory
    protected FlowableEngineAgendaFactory agendaFactory;
    protected AgendaFutureMaxWaitTimeoutProvider agendaFutureMaxWaitTimeoutProvider;
```
**议程工厂和议程未来最大等待超时提供程序**
    1. agendaFactory
        作用：创建Flowable引擎的议程实例。
        主要功能：
            管理和提供引擎执行过程中要执行的操作列表。
            允许用户自定义议程的创建逻辑。
    2. agendaFutureMaxWaitTimeoutProvider
        作用：提供议程未来操作的最大等待超时。
        主要功能：
            控制议程操作在异步执行时的最大等待时间。
            提供自定义的等待时间逻辑，以适应不同的业务需求。

```java
    protected boolean handleProcessEngineExecutorsAfterEngineCreate = true;
```
**流程引擎执行器处理设置**
    3. handleProcessEngineExecutorsAfterEngineCreate
        作用：控制在引擎创建之后是否处理流程引擎执行器。
        默认值：true
        主要功能：
            确定是否在流程引擎创建之后立即处理执行器。
            允许在引擎初始化过程中灵活管理执行器的创建和配置。
```java
    // Backwards compatibility //////////////////////////////////////////////////////////////

    protected boolean flowable5CompatibilityEnabled; // Default flowable 5 backwards compatibility is disabled!
    protected boolean validateFlowable5EntitiesEnabled = true; // When disabled no checks are performed for existing flowable 5 entities in the db
    protected boolean redeployFlowable5ProcessDefinitions;
    protected Flowable5CompatibilityHandlerFactory flowable5CompatibilityHandlerFactory;
    protected Flowable5CompatibilityHandler flowable5CompatibilityHandler;
```
**Flowable 5兼容性设置**
    1. flowable5CompatibilityEnabled
        作用：启用或禁用对Flowable 5的向后兼容。
        默认值：false
        主要功能：
            控制是否启用对Flowable 5流程定义和实例的向后兼容支持。
    2. validateFlowable5EntitiesEnabled
        作用：启用或禁用对现有Flowable 5实体的检查。
        默认值：true
        主要功能：
            控制是否在数据库中检查和验证现有的Flowable 5实体。
    3. redeployFlowable5ProcessDefinitions
        作用：控制是否重新部署Flowable 5流程定义。
        主要功能：
            在启用向后兼容时，控制是否自动重新部署现有的Flowable 5流程定义。
    4. flowable5CompatibilityHandlerFactory
        作用：创建Flowable 5兼容性处理器的工厂。
        主要功能：
            提供创建Flowable 5兼容性处理器实例的逻辑。
    5. flowable5CompatibilityHandler
        作用：Flowable 5兼容性处理器。
        主要功能：
            处理Flowable 5流程定义和实例的兼容性操作。            
            
```java
    // Can't have a dependency on the Flowable5-engine module
    protected Object flowable5ActivityBehaviorFactory;
    protected Object flowable5ListenerFactory;
```
**Flowable 5兼容性设置**
    1. flowable5ActivityBehaviorFactory
        作用：创建Flowable 5活动行为实例的工厂。
        主要功能：
            管理和提供Flowable 5中的各种活动节点的行为实例。
    2. flowable5ListenerFactory
        作用：创建Flowable 5监听器实例的工厂。
        主要功能：
            管理和提供Flowable 5中的各种事件监听器实例。
**Flowable 5 BPMN解析处理程序**

```java
    protected List<Object> flowable5PreBpmnParseHandlers;
    protected List<Object> flowable5PostBpmnParseHandlers;
    protected List<Object> flowable5CustomDefaultBpmnParseHandlers;
    protected Set<Class<?>> flowable5CustomMybatisMappers;
    protected Set<String> flowable5CustomMybatisXMLMappers;
    protected Object flowable5ExpressionManager;
```
    3. flowable5PreBpmnParseHandlers
        作用：Flowable 5的预BPMN解析处理程序列表。
        主要功能：
            在Flowable 5 BPMN解析开始之前执行预处理操作。
    4. flowable5PostBpmnParseHandlers
        作用：Flowable 5的后BPMN解析处理程序列表。
        主要功能：
            在Flowable 5 BPMN解析完成之后执行后处理操作。            
    5. flowable5CustomDefaultBpmnParseHandlers
        作用：Flowable 5的自定义默认BPMN解析处理程序列表。
        主要功能：
            在Flowable 5中添加自定义的默认BPMN解析处理程序。

**Flowable 5自定义MyBatis映射器**
   
    6. flowable5CustomMybatisMappers
        作用：Flowable 5的自定义MyBatis映射器类集合。
        主要功能：
            管理和提供Flowable 5中使用的自定义MyBatis映射器类。
    7. flowable5CustomMybatisXMLMappers
        作用：Flowable 5的自定义MyBatis XML映射器集合。
        主要功能：
            管理和提供Flowable 5中使用的自定义MyBatis XML映射器。            

**Flowable 5表达式管理**
    8. flowable5ExpressionManager
        作用：Flowable 5的表达式管理器。
        主要功能：
            管理和解析Flowable 5中的表达式。    
---
参考：
- [](){:target='blank'}
- [](){:target='blank'}
