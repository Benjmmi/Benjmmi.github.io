---
layout: post
title: "flowable2"
keywords: ""
description: ""
tagline: ""
date: '2024-07-31 13:33:42 +0800'
category: linux
tags: linux
---
> {{ page.description }}

>>> 来自于 `org.flowable.engine.ProcessEngineConfiguration`

# 前言
对于业务型的系统还是考虑其设计和应用,源码深入剖析远远没有必要,只需要点到为止即可。

`Flowable` 是 Fork 了 Activiti 的分支，基础结构基本一样，在功能特性上做了一些细微的调整。Flowable 支持 [BPMN](https://tkjohn.github.io/flowable-userguide/#bpmn20) SOP规范

```java
    protected String processEngineName = ProcessEngines.NAME_DEFAULT;
    protected int idBlockSize = 2500;
    protected String history = HistoryLevel.AUDIT.getKey();
    protected boolean asyncExecutorActivate;
    protected boolean asyncHistoryExecutorActivate;
```

1. processEngineName
    作用：设置流程引擎的名称。
    默认值：`ProcessEngines.NAME_DEFAULT`
    主要功能：
        指定流程引擎的名称，以便在多引擎环境中区分不同的流程引擎实例。
2. idBlockSize
    作用：设置ID块的大小，用于生成唯一ID。
    默认值：2500
    主要功能：
        控制一次生成的唯一ID数量，以提高ID生成的性能。
3. history
    作用：设置历史记录级别。
    默认值：HistoryLevel.AUDIT.getKey()
    主要功能：
        控制流程实例和任务的历史记录级别，可以选择无历史记录、仅活动记录、审核级别记录和完整记录。        

**异步执行器配置**

4. asyncExecutorActivate
    作用：启用或禁用异步执行器。
    主要功能：
        控制是否激活异步执行器，以便在后台异步执行任务和作业。
5. asyncHistoryExecutorActivate
    作用：启用或禁用异步历史执行器。
    主要功能：
        控制是否激活异步历史执行器，以便在后台异步处理历史数据的记录和存储。

```java
    protected FlowableMailClient defaultMailClient;
    protected MailServerInfo defaultMailServer;
    protected String mailSessionJndi;
    protected Map<String, MailServerInfo> mailServers = new HashMap<>();
    protected Map<String, FlowableMailClient> mailClients = new HashMap<>();
    protected Map<String, String> mailSessionsJndi = new HashMap<>();
```
1. defaultMailClient
    作用：默认邮件客户端。
    主要功能：
        用于发送和接收电子邮件的默认客户端。
2. defaultMailServer
    作用：默认邮件服务器信息。
    主要功能：
        存储默认邮件服务器的配置信息，如服务器地址、端口、用户名和密码。        
3. mailSessionJndi
    作用：JNDI邮件会话。
    主要功能：
        使用Java命名和目录接口（JNDI）查找邮件会话。
4. mailServers
    作用：邮件服务器信息的映射。
    主要功能：
        存储多个邮件服务器的配置信息，以便根据不同的需求发送邮件。
5. mailClients
    作用：邮件客户端的映射。
    主要功能：
        存储多个邮件客户端，以便根据不同的需求发送邮件。
6. mailSessionsJndi
    作用：JNDI邮件会话的映射。
    主要功能：
        存储多个JNDI邮件会话名称，以便根据不同的需求发送邮件。

```java
    protected HttpClientConfig httpClientConfig = new HttpClientConfig();
```
**HTTP客户端配置**

1. httpClientConfig
    作用：配置HTTP客户端。
    主要功能：
        管理HTTP客户端的配置，如连接超时、请求超时、代理设置等。

**历史级别配置**

```java
    protected HistoryLevel historyLevel;
    protected boolean enableProcessDefinitionHistoryLevel;
```
2. historyLevel
    作用：设置流程引擎的历史级别。
    主要功能：
        控制流程实例和任务的历史记录级别，可以选择无历史记录、仅活动记录、审核级别记录和完整记录。
3. enableProcessDefinitionHistoryLevel
    作用：启用或禁用流程定义的历史级别。
    主要功能：
        控制是否为每个流程定义启用不同的历史级别。        

```java
    protected String jpaPersistenceUnitName;
    protected Object jpaEntityManagerFactory;
    protected boolean jpaHandleTransaction;
    protected boolean jpaCloseEntityManager;
```

**JPA配置**

4. jpaPersistenceUnitName
    作用：设置JPA持久化单元名称。
    主要功能：
        指定JPA持久化单元的名称，用于实体管理器工厂的创建。

5. jpaEntityManagerFactory
    作用：设置JPA实体管理器工厂。
    主要功能：
        使用指定的实体管理器工厂来管理JPA实体。
6. jpaHandleTransaction
    作用：控制JPA事务的处理。
    主要功能：
        指定是否由Flowable引擎管理JPA事务。        
7. jpaCloseEntityManager
    作用：控制JPA实体管理器的关闭。
    主要功能：
        指定是否在事务结束时关闭JPA实体管理器。

```java
    protected AsyncExecutor asyncExecutor;
    protected AsyncTaskExecutor asyncTaskExecutor;
    protected boolean shutdownAsyncTaskExecutor;
    protected AsyncTaskExecutor asyncTaskInvokerTaskExecutor;
```
**异步执行器配置**

1. asyncExecutor
    作用：异步执行器。
    主要功能：
        管理和调度异步任务和作业，确保它们在后台执行。
2. asyncTaskExecutor
    作用：异步任务执行器。
    主要功能：
        负责执行异步任务，通常由异步执行器调度。
3. shutdownAsyncTaskExecutor
    作用：控制异步任务执行器的关闭。
    主要功能：
        指定在流程引擎关闭时是否关闭异步任务执行器。

```java
    protected boolean shutdownAsyncTaskInvokerTaskExecutor;
    protected AsyncTaskInvoker asyncTaskInvoker;
```    

**异步任务调用器配置**

4. asyncTaskInvokerTaskExecutor
    作用：异步任务调用器任务执行器。
    主要功能：
        专门用于调用异步任务的执行器，通常由异步任务调用器使用。
5. shutdownAsyncTaskInvokerTaskExecutor
    作用：控制异步任务调用器任务执行器的关闭。
    主要功能：
        指定在流程引擎关闭时是否关闭异步任务调用器任务执行器。
6. asyncTaskInvoker
    作用：异步任务调用器。
    主要功能：
        负责实际调用和执行异步任务。


---
参考：
- [](){:target='blank'}
- [](){:target='blank'}
